gara.provide("gara.widgets.Composite","gara.widgets.Scrollable");gara.use("gara.widgets.Control");gara.Class("gara.widgets.Composite",function(){return{$extends:gara.widgets.Scrollable,layoutInformation:null,$constructor:function(a,e){this.$super(a,e);this.layoutInformation=null},bindListener:function(a,e){gara.addEventListener(this.handle,a,e)},createHandle:function(a){this.$super(a);this.addClass("garaComposite")},createWidget:function(){this.createHandle("div");this.handle.tabIndex=-1},getChildren:function(){var e={},b,f,k,g,c={},h=0,d=[],i=this.getClientArea().childNodes;for(f=0,k=i.length;f<k;f++){b=i[f];if(b.widget&&b.widget!==this&&b.widget instanceof gara.widgets.Control){g=b.widget.handle.style.zIndex===""?0:b.widget.handle.style.zIndex;if(!c[g]){c[g]=[]}c[g][c[g].length]=b.widget;h=Math.max(h,g)}}for(f=h;f>=0;f--){if(c[f]){c[f].forEach(function(a){d[d.length]=a},this)}}return d},getLayout:function(){return this.layoutInformation},layout:function(){var g=[],c,h,d,i=[],m=[],n=[],q=["h25","h50","h75","h33","h66"],s=["w25","w50","w75","w33","w66"],r=[0.25,0.5,0.75,0.3333,0.6666],l,j,o=gara.getStyle(this.getClientArea(),"overflow-x"),p=gara.getStyle(this.getClientArea(),"overflow-y");this.update();this.getClientArea().style.overflowX="hidden";this.getClientArea().style.overflowY="hidden";j=this.getClientArea().clientHeight;l=this.getClientArea().clientWidth;if(l===0||j===0){return}if(this.layoutInformation!==null){this.layoutInformation.layout(this);this.getClientArea().style.overflowY=p;this.getClientArea().style.overflowX=o;return}this.getChildren().forEach(function(a){if(a instanceof gara.widgets.Scrollable){if(a.getWidth()===null){a.adjustWidth(l)}if(a.getHeight()>1){j-=a.getHeight()}else if(a.hasClass("h25")||a.hasClass("h50")||a.hasClass("h75")||a.hasClass("h33")||a.hasClass("h66")){n.push(a)}else if(a.getHeight()===null){i.push(a)}else if(a.getHeight()>=0&&a.getHeight()<=1){m.push(a)}}},this);c=j;i.forEach(function(a,e,b){if(e===b.length-1){a.adjustHeight(c)}else{d=Math.floor(c/i.length);a.adjustHeight(d);c-=d}},this);m.forEach(function(a,e,b){if(e===b.length-1){a.adjustHeight(c)}else{d=Math.floor(a.getHeight()*j);a.adjustHeight(d);c-=d}},this);n.forEach(function(b,f,k){if(f===k.length-1){b.adjustHeight(c)}else{q.forEach(function(a,e){if(b.hasClass(a)){h=r[e];return}},this);d=Math.floor(h*j);b.adjustHeight(d);c-=d}},this);this.getChildren().forEach(function(a){if(a instanceof gara.widgets.Composite){a.layout()}else if(a.update){a.update()}});this.getClientArea().style.overflowY=p;this.getClientArea().style.overflowX=o},releaseChildren:function(){this.getChildren().forEach(function(a){a.release()})},setLayout:function(a){if(!(a instanceof gara.layout.Layout)){throw new TypeError("layout not instance of gara.layout.Layout");}if(this.layoutInformation!==null){this.layoutInformation.deconstruct(this)}this.layoutInformation=a;this.layoutInformation.construct(this);return this},setHeight:function(a){this.$super(a);return this},setWidth:function(a){this.$super(a);return this},unbindListener:function(a,e){gara.removeEventListener(this.handle,a,e)}}});