if(typeof(gara)!=="undefined"){var gara={}}
(function(){var m,k,G,f={global:window,baseUrl:"./",disableIncludes:false},L=document.getElementsByTagName("head")[0],l={},v=[],n=1,z,H,o,I,i={},p=[],A=[],B=false,M=/xyz/.test(function(){xyz})?/\$super/:/.*/,J=[],w=[],h={},x="",q={},r={},s=1,K,y,C,D,E=function(){};

	m=document.getElementsByTagName("script");for(k=0;k<m.length;++k){if(m[k].src&&(m[k].src.indexOf("gara.js")!=-1)){f.baseUrl=m[k].src.substring(0,m[k].src.lastIndexOf("/"));break}}f.libs=f.baseUrl+"/../lib/";if(typeof(gara)=="object"){for(var t in gara){f[t]=gara[t]}}gara={};gara.toString=function(){return"[gara]"};gara.version="1.0b3";gara.XHR=(function(){var c=null,d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];return function(){if(c===null){if(typeof XMLHttpRequest!=="undefined"){c=XMLHttpRequest}else{for(var a=0;a<3;++a){var b=d[a];try{c=ActiveXObject(b)}catch(t){}}}}return new c()}})();G=function(a){var b=gara.XHR(),c;b.open('GET',f.libs+a,false);try{b.send(null);c=b.responseText;if(window.execScript){window.execScript(c);return null}return f.global.eval?f.global.eval(c):eval(c)}catch(t){console.error(t)}};if(typeof(base2)=="undefined"||typeof(base2.DOM)=="undefined"){G("base2-dom-fp.js")}base2.JavaScript.bind(window);gara.getStyle=function(c,d){var e;if(document.defaultView&&document.defaultView.getComputedStyle){e=document.defaultView.getComputedStyle(c,"").getPropertyValue(d)}else if(c.currentStyle){d=d.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});e=c.currentStyle[d]}return e};gara.getNumStyle=function(a,b){var c=parseInt(gara.getStyle(a,b));return isNaN(c)?0:c};gara.generateUID=function(){var a=new Date();return"garaID"+a.getDay()+a.getHours()+a.getMinutes()+a.getSeconds()+a.getMilliseconds()};p=["gara.app","gara.jsface.action","gara.jsface.viewers","gara.jswt.widgets","gara.jswt.events","gara.jswt","gara"],A=[f.baseUrl+"/gara.app",f.baseUrl+"/gara.jsface.action",f.baseUrl+"/gara.jsface.viewers",f.baseUrl+"/gara.jswt.widgets",f.baseUrl+"/gara.jswt.events",f.baseUrl+"/gara.jswt",f.baseUrl+"/gara"],i[n]={resources:[]};
	gara.setResourcePath=function(a,b){p.push(a);A.push(b)};
	I=function(a){var b="",c,d;while(a.indexOf("/")!==-1){c=a.lastIndexOf("/");d=a.substring(0,c===-1?a.length:c);b=a.replace(/(.+)\/([^\/]+)$/g,"$2")+(b===""?b:"/"+b);if(p.contains(d)){return A[p.indexOf(d)]+"/"+b+".js"}else{a=a.replace(/(.+)\/([^\/]+)$/g,"$1")}}return f.baseUrl+"/"+a+(b===""?b:"/"+b)+".js"};
	gara.loadScript=function(b,c){b=typeof(b)==="string"?[b]:b;b.forEach(function(a){a=z(a);if(!Object.prototype.hasOwnProperty.call(l,a)){l[a]={name:a,path:I(a),loaded:false,callbackqs:[]};if(!v.contains(a)){v.push(a);H(l[a])}l[a].callbackqs.push(n)}i[n].resources.push(l[a])});if(c){gara.loaded(c)}};gara.ls=gara.loadScript;gara.loaded=function(a){if(v.length){i[n++].callback=a;i[n]={resources:[]}}else{a.call()}};o=function(d){var e=d.target||d.srcElement,g=l[e.name];if(d.type==="load"||/^(complete|loaded)$/.test(e.readyState)){v.remove(g.name);g.loaded=true;if(e.removeEventListener){e.removeEventListener("load",o,false)}else if(e.detachEvent){e.detachEvent("onreadystatechange",o)}g.callbackqs.forEach(function(b){var c=true;i[b].resources.forEach(function(a){c=c&&a.loaded});if(c){if(i[b].callback){i[b].callback.call()}g.callbackqs.remove(b);delete i[b]}})}};H=function(a){var b=document.createElement("script");if(b.addEventListener){b.addEventListener("load",o,false)}else if(b.attachEvent){b.attachEvent("onreadystatechange",o)}b.name=a.name;b.src=a.path;L.appendChild(b)};z=function(a){var b,c=false;while(a.indexOf(".")!==-1&&!c){b=a.indexOf("/");c=p.contains(a.substring(0,b===-1?a.length:b));if(!c){a=a.replace(/(.+)\.([^.]+)$/g,"$1/$2")}}return a};h[s]={classes:[]};E.extend=function(e){var g=this.prototype,F,N={},j;B=true;F=new this();B=false;for(j in e){F[j]=typeof e[j]=="function"&&typeof g[j]=="function"&&M.test(e[j])?(function(c,d){return function(){var a=this.$super,b;this.$super=g[c];b=d.apply(this,arguments);this.$super=a;return b}})(j,e[j]):e[j]}function u(){if(!B&&this.$constructor){this.$constructor.apply(this,arguments)}}u.prototype=F;u.constructor=u;u.extend=arguments.callee;return u};gara.provide=function(a){var b=z(a);l[b]={name:b,loaded:true,callbackqs:[]};x=a};gara.require=function(b,c){gara.ls(b);b=typeof(b)==="string"?[b]:b;b.forEach(function(a){if(!w.contains(a)){h[s].classes.push(a)}});if(c){gara.ready(c)}};gara.use=function(b){gara.ls(b);b=typeof(b)==="string"?[b]:b;b.forEach(function(a){if(!Object.prototype.hasOwnProperty.call(q,x)){q[x]=[]}q[x].push(a)})};gara.parent=function(a,b){gara.ls(a);gara.use(a);if(J.contains(a)){b.call()}else{if(!Object.prototype.hasOwnProperty.call(r,a)){r[a]=[]}r[a].push(b)}};gara.ready=function(b){var c=true;h[s].classes.forEach(function(a){c=c&&w.contains(a)});if(c){b.call()}else{h[s++].callback=b;h[s]={classes:[]}}};y=function(b){var c,d;w.push(b);for(c in h){d=true;if(h[c].classes.contains(b)){h[c].classes.forEach(function(a){d=d&&w.contains(a)});if(d){h[c].callback.call();delete h[c]}}}};K=function(b){J.push(b);if(Object.prototype.hasOwnProperty.call(r,b)){r[b].forEach(function(a){a.call()})}};gara.Class=function(a,b){var c,d;b=b||a;d=b.$extends||E;if(b===a){if(this instanceof gara.Class){c=d.extend(b);return new c()}return d.extend(b)}else{C(a);D(a,b);this.base=d.extend(b);eval(a+" = this.base");K(a);if(Object.prototype.hasOwnProperty.call(q,a)){gara.require(q[a],function(){y(a)})}else{y(a)}}};gara.Singleton=function(a,b){var c=b.$extends||E;C(a);D(a,b);this.base=c.extend(b);eval(a+" = new this.base()");y(a)};D=function(a,b){if(!Object.prototype.hasOwnProperty.call(b,"toString")&&b!==a){b.toString=function(){return"["+a+"]"}}b.getClass=function(){return a}};C=function(a){var b="",c,d,e=f.global,g;c=a.split(".");for(g=0;g<c.length-1;++g){d=e[c[g]];b+="."+c[g];if(typeof d=="undefined"){d={toString:function(){return"["+b.substring(1)+"]"}};e[c[g]]=d}e=d}};gara.Class("gara.Exception",{$constructor:function(a){this.message=String(a)},getName:function(){return this.getClass()},getMessage:function(){return this.message},toString:function(){return"[error "+this.getName()+"] "+this.getMessage()}})})();