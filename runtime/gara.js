if(typeof(gara)!=="undefined"){var gara={}}(function(){var q,o,ba,h={global:window,baseUrl:".",garaBaseUrl:"./",disableIncludes:false},bb=document.getElementsByTagName("head")[0],p={},E=[],r=1,H,T,v,U,n={},w=[],I=[],J=false,bc=/xyz/.test(function(){xyz})?/\$super/:/.*/,K=[],F=[],j={},x=1,s="",l="",y={},k={},G=[],m={},z=1,A={},L,M,B,V,bd,be,t,W,N,X,O,P=function(){},Q,C={},Y,Z={"gara.ok":"Ok","gara.cancel":"Cancel","gara.yes":"Yes","gara.no":"No","gara.retry":"Retry","gara.abort":"Abort","gara.ignore":"Ignore"};if(typeof Array.isArray!=='function'){Array.isArray=function(a){return Object.prototype.toString.apply(a)==='[object Array]'}}if(typeof Array.prototype.add==="undefined"){Array.prototype.add=function(a){this[this.length]=a}}if(typeof Array.prototype.contains==="undefined"){Array.prototype.contains=function(a){return this.indexOf(a)!==-1}}if(typeof Array.prototype.remove==="undefined"){Array.prototype.remove=function(a){var b=this.indexOf(a);if(b!==-1){this.splice(b,1)}}}if(typeof Array.prototype.removeAt==="undefined"){Array.prototype.removeAt=function(a){this.splice(a,1)}}if(typeof Array.prototype.insertAt==="undefined"){Array.prototype.insertAt=function(a,b){this.splice(a,0,b)}}q=document.getElementsByTagName("script");for(o=0;o<q.length;++o){if(q[o].src&&(q[o].src.indexOf("gara.js")!=-1)){h.garaBaseUrl=q[o].src.substring(0,q[o].src.lastIndexOf("/"));break}}h.libs=h.garaBaseUrl+"/../lib/";if(typeof(gara)=="object"){for(var D in gara){h[D]=gara[D]}}gara={};gara.toString=function(){return"[gara]"};gara.version="1.0-beta";gara.XHR=(function(){var c=null,d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];return function(){if(c===null){if(typeof XMLHttpRequest!=="undefined"){c=XMLHttpRequest}else{for(var a=0;a<3;++a){var b=d[a];try{c=ActiveXObject(b)}catch(D){}}}}return new c()}})();ba=function(a){var b=gara.XHR(),c;b.open('GET',h.libs+a,false);try{b.send(null);c=b.responseText;if(window.execScript){window.execScript(c);return null}return h.global.eval?h.global.eval(c):eval(c)}catch(D){console.error(D)}};gara.getStyle=function(c,d){var e;if(document.defaultView&&document.defaultView.getComputedStyle){e=document.defaultView.getComputedStyle(c,"").getPropertyValue(d)}else if(c.currentStyle){d=d.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});e=c.currentStyle[d]}return e};gara.getNumStyle=function(a,b){var c=parseInt(gara.getStyle(a,b));return isNaN(c)?0:c};gara.generateUID=function(){var a=new Date();return"garaUID"+a.getDay()+a.getHours()+a.getMinutes()+a.getSeconds()+a.getMilliseconds()};gara.addEventListener=function(a,b,c,d){a.addEventListener(b,c,d||false);var e=new Date();var f=""+e.getDay()+e.getHours()+e.getMinutes()+e.getSeconds()+e.getMilliseconds();if(!a._garaHash){a._garaHash=a.toString()+f}if(!Object.prototype.hasOwnProperty.call(c,"_garaHash")){c._garaHash=c.toString()+f}var g=""+a._garaHash+b+c._garaHash;var R={domNode:a,type:b,listener:c};C[g]=R;return R};gara.removeEventListener=function(a,b,c){if(a){a.removeEventListener(b,c,false);if(a._garaHash&&c.hasOwnProperty("_garaHash")){var d=a._garaHash+b+c._garaHash;if(C[d]){delete C[d]}}}};Y=function(){var a,b;for(a in C){b=C[a];gara.removeEventListener(b.domNode,b.type,b.listener)}};window.addEventListener("unload",Y,false);gara.l10n=function(a,b){var c;if(Object.prototype.hasOwnProperty.call(Z,a)){c=Z[a]}if(typeof b!=="undefined"){c=b}return c};w=["gara.action","gara.dialogs","gara.events","gara.layout","gara.viewers","gara.widgets","gara.window"],I=[h.garaBaseUrl+"/gara.action",h.garaBaseUrl+"/gara.dialogs",h.garaBaseUrl+"/gara.events",h.garaBaseUrl+"/gara.layout",h.garaBaseUrl+"/gara.viewers",h.garaBaseUrl+"/gara.widgets",h.garaBaseUrl+"/gara.window"],n[r]={resources:[]};gara.setResourcePath=gara.registerModulePath=function(a,b){w.add(a);I.add(b)};U=function(a){var b="",c,d;while(a.indexOf("/")!==-1){c=a.lastIndexOf("/");d=a.substring(0,c===-1?a.length:c);b=a.replace(/(.+)\/([^\/]+)$/g,"$2")+(b===""?b:"/"+b);if(w.contains(d)){return I[w.indexOf(d)]+"/"+b+".js"}else{a=a.replace(/(.+)\/([^\/]+)$/g,"$1")}}return h.baseUrl+"/"+a+(b===""?b:"/"+b)+".js"};gara.loadScript=function(b,c){b=typeof(b)==="string"?[b]:b;b.forEach(function(a){a=H(a);if(!Object.prototype.hasOwnProperty.call(p,a)){p[a]={name:a,path:U(a),loaded:false,callbackqs:[]};if(!E.contains(a)){E.push(a);T(p[a])}p[a].callbackqs.push(r)}console.log("gara.loadScript, cbc: "+r);n[r].resources.push(p[a])});if(c){gara.loaded(c)}};gara.ls=gara.loadScript;gara.loaded=function(a){if(E.length){n[r++].callback=a;n[r]={resources:[]}}else{a.call()}};v=function(d){var e=d.target||d.srcElement,f=p[e.name];if(d.type==="load"||/^(complete|loaded)$/.test(e.readyState)){E.remove(f.name);f.loaded=true;if(e.removeEventListener){e.removeEventListener("load",v,false)}else if(e.detachEvent){e.detachEvent("onreadystatechange",v)}f.callbackqs.forEach(function(b){var c=true;n[b].resources.forEach(function(a){c=c&&a.loaded});if(c){if(n[b].callback){n[b].callback.call()}f.callbackqs.remove(b);delete n[b]}})}};T=function(a){var b=document.createElement("script");if(b.addEventListener){b.addEventListener("load",v,false)}else if(b.attachEvent){b.attachEvent("onreadystatechange",v)}b.name=a.name;b.src=a.path;bb.appendChild(b)};H=function(a){var b,c=false;while(a.indexOf(".")!==-1&&!c){b=a.indexOf("/");c=w.contains(a.substring(0,b===-1?a.length:b));if(!c){a=a.replace(/(.+)\.([^.]+)$/g,"$1/$2")}}return a};j[x]={classes:[]};k[z]={classes:[]};P.extend=function(e){var f=this.prototype,g,R={},i,S={};J=true,g=new this();J=false;for(i in e){if(e[i]instanceof Q){switch(e[i].getModifier()){case"static":S[i]=e[i].getValue();break}}else{g[i]=typeof e[i]=="function"&&typeof f[i]=="function"&&bc.test(e[i])?(function(c,d){return function(){var a=this.$super,b;this.$super=f[c];b=d.apply(this,arguments);this.$super=a;return b}})(i,e[i]):e[i]}}function u(){if(!J&&this.$constructor){this.$constructor.apply(this,arguments)}}for(i in S){u[i]=S[i]}u.prototype=g;u.constructor=u;u.extend=arguments.callee;return u};Q=function(a,b){var c=a,d=b;this.getModifier=function(){return c};this.getValue=function(){return d}};gara.provide=function(a,b){X(a);var c=H(a);p[c]={name:c,loaded:true,callbackqs:[]};s=a;if(b){gara.$super(b)}};gara.require=function(){var a,b;for(a=0;a<arguments.length;a++){b=arguments[a];if(typeof(b)==="string"){gara.ls(b);if(!F.contains(b)){j[x].classes.push(b)}}else if(typeof(b)==="function"){gara.ready(b)}}};V=function(b,c){var d=true;gara.ls(b);b=typeof(b)==="string"?[b]:b;b.forEach(function(a){if(!G.contains(a)){k[z].classes.push(a)}});if(c){k[z].classes.forEach(function(a){d=d&&G.contains(a)});if(d){c.call()}else{k[z++].callback=c;k[z]={classes:[]}}}};L=function(a,b){var c,d,e,f;M.add(a);if(m[a]){for(d=0,e=m[a].length;d<e;d++){c=m[a][d];if(c===b){A[b]=a;return true}if(!M.contains(c)&&L(c,b)){return true}}}return false};gara.use=function(b){gara.ls(b);b=typeof(b)==="string"?[b]:b;b.forEach(function(a){M=[];if(!L(a,s)){if(!Object.prototype.hasOwnProperty.call(m,s)){m[s]=[]}m[s].push(a)}})};gara.$super=function(a){gara.ls(a);l=a};gara.$static=function(a){return new Q("static",a)};gara.ready=function(b){var c=true;j[x].classes.forEach(function(a){c=c&&F.contains(a)});if(c){b.call()}else{j[x++].callback=b;j[x]={classes:[]}}};t=function(b){var c,d;F.push(b);for(c in j){d=true;if(j[c].classes.contains(b)){j[c].classes.forEach(function(a){d=d&&F.contains(a)});if(d){j[c].callback.call();delete j[c]}}}};B=function(b){var c,d;G.push(b);for(c in k){d=true;if(k[c].classes.contains(b)){k[c].classes.forEach(function(a){d=d&&G.contains(a)});if(d){k[c].callback.call();delete k[c]}}}};W=function(b){K.push(b);if(Object.prototype.hasOwnProperty.call(y,b)){y[b].forEach(function(a){a.call()})}};N=function(a,b,c){if(typeof(b)==="function"){if(a===s&&l&&K.contains(l)){return c.call(this,a,b())}else if(l&&!K.contains(l)){gara.use(l);if(!Object.prototype.hasOwnProperty.call(y,l)){y[l]=[]}y[l].push(function(){c.call(this,a,b())})}else{return c.call(this,a,b())}}else{return c.call(this,a,b)}};O=function(a,b){if(!Object.prototype.hasOwnProperty.call(b,"toString")&&b!==a){b.toString=function(){return"["+a+"]"}}b.getClass=function(){return a}};X=function(b){var c="",d,e,f=h.global,g;d=b.split(".");for(g=0;g<d.length;++g){e=f[d[g]];c+="."+d[g];if(typeof e==="undefined"){e=(function(a){return{toString:function(){return"["+a+"]"}}})(c.substring(1));f[d[g]]=e}f=e}};createClass=function(a,b){var c="",d,e,f=h.global,g;d=a.split(".");for(g=0;g<d.length-1;++g){e=f[d[g]];c+="."+d[g];if(typeof e==="undefined"){e={};f[d[g]]=e}f=e}f[d[d.length-1]]=b};gara.Class=function(f,g){N(f,g||f,function(a,b){var c,d,e;b=b||a;d=b.$extends||P;if(b===a){if(this instanceof gara.Class){c=d.extend(b);return new c()}return d.extend(b)}else{O(a,b);createClass(a,d.extend(b));W(a);if(Object.prototype.hasOwnProperty.call(m,a)){V(m[a],function(){B(a);if(A[a]){e=m[a];e.push(A[a]);gara.require(e,function(){t(a)})}else{t(a)}})}else if(A[a]){B(a);gara.require(A[a],function(){t(a)})}else{B(a);t(a)}}})};gara.Singleton=function(d,e){N(d,e,function(a,b){var c=b.$extends||P;O(a,b);createClass(a,new(c.extend(b))());B(a);t(a)})};gara.Class("gara.Exception",{$constructor:function(a){this.message=String(a)},getName:function(){return this.getClass()},getMessage:function(){return this.message},toString:function(){return"[error "+this.getName()+"] "+this.getMessage()}});gara.ABORT=512;gara.ARROW_DOWN=40;gara.ARROW_LEFT=37;gara.ARROW_RIGHT=39;gara.ARROW_UP=38;gara.APPLICATION_MODAL=65536;gara.BAR=2;gara.BORDER=2048;gara.BOTTOM=1024;gara.CANCEL=256;gara.CASCADE=64;gara.CHECK=32;gara.CLOSE=64;gara.DEFAULT=0;gara.DEL=46;gara.DIALOG_TRIM=32|64|2048;gara.DOWN=1024;gara.DRAG=1;gara.DROP_DOWN=4;gara.ERROR_MENU_NOT_DROP_DOWN=21;gara.ERROR_WIDGET_DISPOSED=24;gara.ERROR_MENUITEM_NOT_CASCADE=27;gara.END=35;gara.ENTER=13;gara.ESC=27;gara.HOME=36;gara.HORIZONTAL=256;gara.F1=112;gara.F2=113;gara.F3=114;gara.F4=115;gara.F5=116;gara.F6=117;gara.F7=118;gara.F8=119;gara.F9=120;gara.F10=121;gara.F11=122;gara.F12=123;gara.FULL_SELECTION=65536;gara.ICON_ERROR=1;gara.ICON_INFORMATION=2;gara.ICON_QUESTION=4;gara.ICON_WARNING=8;gara.ICON_WORKING=16;gara.IGNORE=2048;gara.LAYOUT_LOOSY=1;gara.MAX=1024;gara.MIN=128;gara.MULTI=2;gara.NO=128;gara.NO_RADIO_GROUP=4194304;gara.NO_TRIM=8;gara.NONE=0;gara.OK=32;gara.PAGE_DOWN=34;gara.PAGE_UP=33;gara.PASSWORD=4194304;gara.POP_UP=8;gara.PUSH=8;gara.RADIO=16;gara.READ_ONLY=8;gara.RESIZE=16;gara.RETRY=1024;gara.SCROLLBAR_HEIGHT=0;gara.SCROLLBAR_WIDTH=0;gara.addEventListener(document,"DOMContentLoaded",function(){var a=document.createElement("div");a.style.width="200px";a.style.height="200px";a.style.position="absolute";a.style.left="-1000px";a.style.top="-1000px";document.getElementsByTagName("body")[0].appendChild(a);a.style.overflow="scroll";gara.SCROLLBAR_WIDTH=a.offsetWidth-a.clientWidth;document.getElementsByTagName("body")[0].removeChild(a);a=document.createElement("div");a.style.width="200px";a.style.height="200px";a.style.position="absolute";a.style.left="-1000px";a.style.top="-1000px";document.getElementsByTagName("body")[0].appendChild(a);a.style.overflow="scroll";gara.SCROLLBAR_HEIGHT=a.offsetHeight-a.clientHeight;document.getElementsByTagName("body")[0].removeChild(a)},false);gara.SEPARATOR=2;gara.SHELL_TRIM=32|64|128|1024|16|2048;gara.SINGLE=4;gara.SPACE=32;gara.SYSTEM_MODAL=131072;gara.TITLE=32;gara.TOOLBAR=16;gara.TOP=128;gara.UP=128;gara.VERTICAL=512;gara.YES=64})();