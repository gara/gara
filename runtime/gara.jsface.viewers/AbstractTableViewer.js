gara.provide("gara.jsface.viewers.AbstractTableViewer");gara.require("gara.jsface.viewers.ColumnViewer");gara.require("gara.jswt.widgets.Item");$package("gara.jsface.viewers");$class("AbstractTableViewer",{$extends:gara.jsface.viewers.ColumnViewer,$constructor:function(){this.$base()},_createItem:function(b,c){this._updateItem(this._internalCreateNewRowPart(gara.jswt.JSWT.NONE,c).getItem(),b)},_doFindInputItem:function(b){var c=this._getRoot();if(c==null){return null}if(c==b){return this.getControl()}return null},_doClear:$abstract(function(b){}),_doGetColumn:$abstract(function(){}),_doGetColumnCount:$abstract(function(){}),_doGetItems:$abstract(function(){}),_doGetSelection:$abstract(function(){}),_doRemoveRange:$abstract(function(b,c){}),_doUpdateItem:function(b,c){if($class.instanceOf(b,gara.jswt.widgets.Item)){var d=b;if(d.isDisposed()){this._unmapElement(c,d);return}var h=d.getData();if(h!=null){this._unmapElement(h,d)}d.setData(c);this._mapElement(c,d);var g=this._doGetColumnCount();if(g==0){g=1}var l=this._getViewerRowFromItem(d);for(var e=0;e<g||e==0;e++){var a=this._getViewerColumn(e);var f=this._updateCell(l,e,c);a.refresh(f)}}},_getColumnViewerOwner:function(b){var c=this._doGetColumnCount();if(b<0||(b>0&&b>=c)){return null}if(c==0){return this.getControl()}return this._doGetColumn(b)},_getSelectionFromWidget:function(){var b=this._doGetSelection();var c=[];for(var d=0;d<b.length;d++){var h=b[d];var g=h.getData();if(g!=null){c.push(g)}}return c},inputChanged:function(b,c){this._internalRefresh()},_internalCreateNewRowPart:$abstract(function(b,c){}),_internalRefresh:function(b,c){if(b==null||b==this._getRoot()){this._internalRefreshAll(c)}else{var d=this._findItem(b);if(d!=null){this._updateItem(d,b)}this.getControl().update()}},_internalRefreshAll:function(g){var l=[];var e=this.getControl().getSelection();for(var a=0;a<e.length;++a){l.push(e[a].getData())}var f=this._getSortedChildren(this._getRoot());var i=this._doGetItems();var k=Math.min(f.length,i.length);for(var a=0;a<k;++a){var j=i[a];if(f[a]==j.getData()){if(g){this._updateItem(j,f[a])}else{this._associate(f[a],j)}}else{this._disassociate(j);this._doClear(a)}}if(k<i.length){for(var a=k;a<i.length;++a){this._disassociate(i[a])}this._doRemoveRange(k,i.length-1)}for(var a=0;a<k;++a){var j=i[a];if(j.getData()==null){this._updateItem(j,f[a])}}for(var a=k;a<f.length;++a){this._createItem(f[a],a)}this.getControl().update();e=[];l.forEach(function(b,c,d){var h=this._getItemFromElementMap(b);if(h!=null){e.push(h)}},this);this.getControl().setSelection(e)}});$package("");