gara.provide("gara.viewers.AbstractListViewer","gara.viewers.StructuredViewer");gara.Class("gara.viewers.AbstractListViewer",function(){return{$extends:gara.viewers.StructuredViewer,storedSelection:[],$constructor:function(){this.storedSelection=[]},createListItem:function(d,c,e){},doFindInputItem:function(d){var c=this.getRoot();if(c===null){return null}if(c===d){return this.getControl()}return null},doGetSelection:function(){},doUpdateItem:function(d,c){if(d.isDisposed()){this.unmapElement(c,d);return}d.setText(this.getLabelProviderText(this.getLabelProvider(),c));if(this.getLabelProvider().getImage){d.setImage(this.getLabelProvider().getImage(c))}this.associate(c,d)},getControl:function(){},getLabelProviderText:function(d,c){var e="";if(d.getText){e=d.getText(c)}return e},getSelectionFromWidget:function(){var d=this.doGetSelection(),c=[],e,n,i;for(e=0;e<d.length;e++){n=d[e];i=n.getData();if(i!==null){c.push(i)}}return c},inputChanged:function(d,c){this.listRemoveAll();this.getControl().setSelection([]);this.internalRefresh()},internalRefresh:function(e,n){var i,k,g,f,q,l,a,m,o,j,b,p,h;if(typeof(e)==="undefined"||e===null||e===this.getRoot()){i=[];k=this.doGetSelection();for(a=0;a<k.length;++a){i.push(k[a].getData())}g=this.getSortedChildren(this.getRoot());f=this.getControl().getItems();q=f.length;l=Math.min(g.length,f.length);m=f.length-l;if(m>0){o=[];for(a=0;a<g.length;a++){o.push(g[a])}a=0;while(m>0&&a<f.length){j=f[a].getData();if(j===null||f.length-a<=m||!o.contains(j)){if(j!==null){this.disassociate(f[a])}f[a].dispose();m--}else{a++}}}for(a=0;a<l;++a){b=f[a];p=b.getData();if(p!==null){h=g[a];if(h===p){j=b.getData();if(j!==null){this.unmapElement(j,b)}b.setData(h);this.mapElement(h,b)}else{this.disassociate(b);b.setImage(null);b.setText("")}}}for(a=0;a<l;++a){b=f[a];h=g[a];if(b.getData()===null){this.associate(h,b);this.updateItem(b,h)}else{if(n){this.updateItem(b,h)}}}if(l<g.length){for(a=l;a<g.length;++a){b=this.createListItem(g[a],gara.DEFAULT,a);this.associate(g[a],b)}}k=[];i.forEach(function(d){var c=this.getItemFromElementMap(d);if(c!==null&&!c.isDisposed()){k.push(c)}},this);this.getControl().update();this.getControl().setSelection(k)}else{b=this.getItemFromElementMap(e);if(b!==null){this.updateItem(b,e)}this.getControl().update()}},listRemoveAll:function(){},listSetItems:function(){}}});