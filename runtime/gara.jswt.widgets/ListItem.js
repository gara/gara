gara.provide("gara.jswt.widgets.ListItem");gara.use("gara.jswt.JSWT");gara.parent("gara.jswt.widgets.Item",function(){gara.Class("gara.jswt.widgets.ListItem",{$extends:gara.jswt.widgets.Item,span:null,spanText:null,img:null,checkbox:null,selected:false,grayed:false,checked:false,$constructor:function(a,b,c){if(!(a instanceof gara.jswt.widgets.List)){throw new TypeError("parent is not type of gara.jswt.widgets.List");}this.grayed=false;this.checked=false;this.selected=false;this.$super(a,b);this.list=a;this.parentNode=this.list.addItem(this,c);this.createWidget()},bindListener:function(a,b){gara.EventManager.addListener(this.img,a,b);gara.EventManager.addListener(this.span,a,b)},createWidget:function(){var a=this.parent.getItems(),b=a.indexOf(this),c;this.handle=document.createElement("li");this.handle.widget=this;this.handle.control=this.list;this.handle.className=this.classes.join(" ");this.handle.setAttribute("id",this.getId());this.handle.setAttribute("role","option");this.handle.setAttribute("aria-selected",this.selected);this.handle.setAttribute("aria-labelledby",this.getId()+"-label");if((this.list.getStyle()&gara.jswt.JSWT.CHECK)===gara.jswt.JSWT.CHECK){this.checkbox=document.createElement("span");this.checkbox.id=this.getId()+"-checkbox";this.checkbox.widget=this;this.checkbox.control=this.tree;this.checkbox.setAttribute("role","presentation");this.setCheckboxClass();this.handle.appendChild(this.checkbox);this.handle.setAttribute("aria-checked",this.checked)}this.img=document.createElement("img");this.img.id=this.getId()+"-image";this.img.widget=this;this.img.control=this.list;this.img.setAttribute("role","presentation");if(this.image!==null){this.img.src=this.image.src}else{this.img.style.display="none"}this.spanText=document.createTextNode(this.text);this.span=document.createElement("span");this.span.id=this.getId()+"-label";this.span.widget=this;this.span.control=this.list;this.span.className="text";this.span.appendChild(this.spanText);this.span.setAttribute("role","presentation");this.handle.appendChild(this.img);this.handle.appendChild(this.span);if(b===a.length-1){this.parentNode.appendChild(this.handle)}else{c=b===0?this.parentNode.firstChild:a[b-1].handle.nextSibling;this.parentNode.insertBefore(this.handle,c)}},dispose:function(){this.$super();if(this.img!==null){this.handle.removeChild(this.img);delete this.img;this.image=null}this.handle.removeChild(this.span);if(this.parentNode!==null){this.parentNode.removeChild(this.handle)}delete this.span;delete this.handle},getChecked:function(){this.checkWidget();return this.checked},getGrayed:function(){this.checkWidget();return this.grayed},handleEvent:function(a){this.checkWidget();if((a.target===this.checkbox&&a.type==="mousedown")||(a.target===this.checkbox&&a.type==="mouseup")||(a.type==="keydown"&&a.keyCode===gara.jswt.JSWT.SPACE)){a.info=gara.jswt.JSWT.CHECK;if(a.type==="mouseup"){this.setChecked(!this.checked)}}},setCheckboxClass:function(){if(!this.checkbox){return}this.checkbox.className="jsWTCheckbox";if(this.checked&&this.grayed){this.checkbox.className+=" jsWTCheckboxGrayedChecked"}else if(this.grayed){this.checkbox.className+=" jsWTCheckboxGrayed"}else if(this.checked){this.checkbox.className+=" jsWTCheckboxChecked"}},setChecked:function(a){this.checkWidget();if(!this.grayed){this.checked=a;this.handle.setAttribute("aria-checked",this.checked);this.setCheckboxClass()}return this},setGrayed:function(a){this.checkWidget();this.grayed=a;if(this.checkbox){this.checkbox.setAttribute("aria-disabled",this.grayed);this.setCheckboxClass()}return this},setImage:function(a){this.$super(a);if(this.image!==null){this.img.src=this.image.src;this.img.style.display=""}else{this.img.src="";this.img.style.display="none"}return this},setSelected:function(a){this.checkWidget();this.selected=a;this.handle.setAttribute('aria-selected',this.selected);return this},setText:function(a){this.$super(a);this.spanText.nodeValue=this.text;return this},unbindListener:function(a,b){if(this.img!==null){gara.EventManager.removeListener(this.img,a,b)}if(this.span!==null){gara.EventManager.removeListener(this.span,a,b)}}})});