gara.provide("gara.jswt.widgets.InputDialog");gara.use("gara.jswt.events.KeyListener");gara.use("gara.jswt.events.ModifyListener");gara.use("gara.jswt.events.SelectionListener");gara.use("gara.jswt.widgets.Composite");gara.use("gara.jswt.widgets.Button");gara.use("gara.jswt.widgets.Label");gara.use("gara.jswt.widgets.Text");gara.require("gara.jswt.JSWT");gara.require("gara.jswt.widgets.Dialog");gara.Class("gara.jswt.widgets.InputDialog",{$extends:gara.jswt.widgets.Dialog,$constructor:function(a,b){this.$base(a,b);this._callback=null;this._context=window;this._message="";this._value="";this._style|=gara.jswt.JSWT.APPLICATION_MODAL;this._txt;this._buttons;this._input;this._btnOk;this._btnCancel;this.addClass("jsWTInputDialog")},_createContents:function(b){var c=this;this._txt=new gara.jswt.widgets.Label(b).setText(this._message).addClass("jsWTInputDialogContentText");this._input=new gara.jswt.widgets.Text(b).setText(this._value).addModifyListener(new gara.Class({$implements:gara.jswt.events.ModifyListener,modifyText:function(a){if(a.type=="keydown"){switch(a.keyCode){case gara.jswt.JSWT.ENTER:c._doOk();break}}}}))this._input.forceFocus();var d=new gara.Class({$implements:[gara.jswt.events.SelectionListener,gara.jswt.events.KeyListener],keyPressed:function(a){if(a.keyCode==gara.jswt.JSWT.ESC){c._doCancel()}},keyReleased:function(a){},widgetSelected:function(a){switch(a.widget){case c._btnOk:c._doOk();break;case c._btnCancel:c._doCancel();break}}});this._buttons=new gara.jswt.widgets.Composite(b).addClass("jsWTInputDialogButtonBar");this._btnOk=new gara.jswt.widgets.Button(this._buttons).setText(gara.i18n.get("gara.ok")).addSelectionListener(d).addKeyListener(d);this._btnCancel=new gara.jswt.widgets.Button(this._buttons).setText(gara.i18n.get("gara.cancel")).addSelectionListener(d).addKeyListener(d);var e=this._getViewportWidth()/2-this.handle.clientWidth/2;var f=this._getViewportHeight()/2-this.handle.clientHeight/2;this.handle.style.left=e+"px";this.handle.style.top=f+"px"},dispose:function(){this._txt.dispose();this._input.dispose();this._btnOk.dispose();this._btnCancel.dispose();this._buttons.dispose();delete this._txt;delete this._input;delete this._btnOk;delete this._btnCancel;delete this._buttons;this.$base();if(this._callback!=null){this._callback.call(this._context,null)}},_doOk:function(){var a=this._input.getText();this.dispose();if(this._callback!=null){this._callback.call(this._context,a)}},_doCancel:function(){this.dispose()},getMessage:function(){return this._message},getValue:function(){return this._value},handleEvent:function(a){this.$base(a);if(this._disposed&&this._callback!=null){this._callback.call(this._context,null)}},open:function(a,b){this._create();this._callback=a;this._context=b||window},setMessage:function(a){this._message=a},setValue:function(a){this._value=a}});