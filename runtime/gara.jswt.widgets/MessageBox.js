gara.provide("gara.jswt.widgets.MessageBox");gara.use("gara.I18n");gara.use("gara.jswt.events.KeyListener");gara.use("gara.jswt.events.SelectionListener");gara.use("gara.jswt.widgets.Composite");gara.use("gara.jswt.widgets.Button");gara.use("gara.jswt.widgets.Label");gara.require("gara.jswt.JSWT");gara.require("gara.jswt.widgets.Dialog");gara.Class("gara.jswt.widgets.MessageBox",{$extends:gara.jswt.widgets.Dialog,$constructor:function(a,d){this._callback=null;this._context=window;this._message="";this._msg;this._buttonBar;this._buttons={};this.$base(a,d)},_createContents:function(d){this.addClass("jsWTMessageBox");this.handle.role="alertdialog";this.handle.setAttribute("aria-describedby",this.getId()+"-message");var e="";var f={"jsWTIconError":gara.jswt.JSWT.ICON_ERROR,"jsWTIconInformation":gara.jswt.JSWT.ICON_INFORMATION,"jsWTIconQuestion":gara.jswt.JSWT.ICON_QUESTION,"jsWTIconWarning":gara.jswt.JSWT.ICON_WARNING,"jsWTIconWorking":gara.jswt.JSWT.ICON_WORKING};for(var g in f){var h=f[g];if((this._style&h)==h){e=g}}this._msg=new gara.jswt.widgets.Label(d).setText(this._message).addClasses(["jsWTMessageBoxContentText",e]);var b=this;var i=new gara.Class({$implements:[gara.jswt.events.SelectionListener,gara.jswt.events.KeyListener],keyPressed:function(a){if(a.keyCode==gara.jswt.JSWT.ESC){b.dispose();if(b._callback!=null){b._callback.call(b._context,gara.jswt.JSWT.CANCEL)}}},keyReleased:function(a){},widgetSelected:function(a){b.dispose();if(b._callback!=null){b._callback.call(b._context,a.widget.id)}}});this._buttonBar=new gara.jswt.widgets.Composite(d).addClass("jsWTMessageBoxButtonBar");var j={"gara.ok":gara.jswt.JSWT.OK,"gara.yes":gara.jswt.JSWT.YES,"gara.no":gara.jswt.JSWT.NO,"gara.abort":gara.jswt.JSWT.ABORT,"gara.retry":gara.jswt.JSWT.RETRY,"gara.ignore":gara.jswt.JSWT.IGNORE,"gara.cancel":gara.jswt.JSWT.CANCEL};var k=false;for(var l in j){var c=j[l];if((this._style&c)==c){this._buttons[c]=new gara.jswt.widgets.Button(this._buttonBar).setText(gara.i18n.get(l));this._buttons[c].id=c;this._buttons[c].addSelectionListener(i);this._buttons[c].addKeyListener(i);if(!k){this._buttons[c].forceFocus();k=true}}}var m=this._getViewportWidth()/2-this.handle.clientWidth/2;var n=this._getViewportHeight()/2-this.handle.clientHeight/2;this.handle.style.left=m+"px";this.handle.style.top=n+"px"},dispose:function(){this.$base();if(this._callback!=null){this._callback.call(this._context,gara.jswt.JSWT.CANCEL)}},getMessage:function(){return this._message},handleEvent:function(a){this.$base(a);if(this._disposed&&this._callback!=null){this._callback.call(this._context,gara.jswt.JSWT.CANCEL)}},open:function(a,d){this._create();this._callback=a||null;this._context=d||window},setMessage:function(a){this._message=a}});