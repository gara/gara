gara.provide("gara.jswt.widgets.FocusManager");gara.use("gara.jswt.widgets.Widget");gara.require("gara.EventManager");gara.ready(function(){gara.Singleton("gara.jswt.widgets.FocusManager",{activeWidget:null,widgets:[],$constructor:function(){gara.EventManager.addListener(document,"keydown",this);gara.EventManager.addListener(document,"keypress",this);gara.EventManager.addListener(document,"keyup",this)},addWidget:function(a){if(!(a instanceof gara.jswt.widgets.Widget)){throw new TypeError("widget is not a gara.jswt.widgets.Widget");}if(!this.widgets.contains(a)){this.widgets.push(a);a.addDisposeListener(this);a.addListener("focus",this);a.addListener("blur",this)}},handleEvent:function(a){switch(a.type){case"keydown":case"keypress":case"keyup":if(this.activeWidget!==null&&this.activeWidget.handleEvent){this.activeWidget.handleEvent(a)}break;case"focus":if(a.target.widget instanceof gara.jswt.widgets.Widget){if(a.target.widget.focusGained){a.target.widget.focusGained(a)}this.activeWidget=a.target.widget}break;case"blur":if(a.target.widget instanceof gara.jswt.widgets.Widget){if(a.target.widget.focusLost){a.target.widget.focusLost(a)}this.activeWidget=null}break}},removeWidget:function(a){if(!(a instanceof gara.jswt.widgets.Widget)){throw new TypeError("widget is not a gara.jswt.widgets.Widget");}if(this.widgets.contains(a)){if(this.activeWidget===a){this.activeWidget=null}a.removeDisposeListener(this);a.removeListener("focus",this);a.removeListener("blur",this);this.widgets.remove(a)}},widgetDisposed:function(a){this.removeWidget(a)}})});