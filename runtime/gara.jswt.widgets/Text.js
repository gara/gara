gara.provide("gara.jswt.widgets.Text");gara.use("gara.jswt.JSWT");gara.use("gara.jswt.widgets.Composite");gara.parent("gara.jswt.widgets.Scrollable",function(){gara.Class("gara.jswt.widgets.Text",{$extends:gara.jswt.widgets.Scrollable,multi:false,modifyListeners:[],selectionListeners:[],$constructor:function(a,b){this.multi=(b&gara.jswt.JSWT.MULTI)===gara.jswt.JSWT.MULTI;this.modifyListeners=[];this.selectionListeners=[];this.$super(a,b||gara.jswt.JSWT.SINGLE)},addModifyListener:function(a){this.checkWidget();if(!this.modifyListeners.contains(a)){this.modifyListeners.push(a)}return this},addSelectionListener:function(a){this.checkWidget();if(!this.selectionListeners.contains(a)){this.selectionListener.push(a)}return this},append:function(a){this.handle.value+=a},bindListener:function(a,b){gara.EventManager.addListener(this.handle,a,b)},createWidget:function(){var c;this.createHandle(this.multi?"textarea":"input");if(!this.multi){c=this.handle.cloneNode(false);c.type=(this.style&gara.jswt.JSWT.PASSWORD)===gara.jswt.JSWT.PASSWORD?"password":"text";this.handle.parentNode.replaceChild(c,this.handle);this.handle=c;for(eventType in this.listeners){this.listeners[eventType].forEach(function(a,b,d){this.bindListener(eventType,a)},this)}}this.handle.readOnly=(this.style&gara.jswt.JSWT.READ_ONLY)===gara.jswt.JSWT.READ_ONLY;this.handle.setAttribute("role","textbox");this.handle.setAttribute("aria-disabled",!this.enabled);this.handle.setAttribute("aria-multiline",(this.style&gara.jswt.JSWT.SINGLE)!==gara.jswt.JSWT.SINGLE);this.handle.setAttribute("aria-readonly",this.handle.readOnly);this.addClass(this.multi?"jsWTMultiText":((this.style&gara.jswt.JSWT.PASSWORD)===gara.jswt.JSWT.PASSWORD?"jsWTPassword":"jsWTText"))},dispose:function(){this.$super();delete this.handle},getSelection:function(){return this.selected},getText:function(){return this.handle.value},handleEvent:function(a){this.checkWidget();if(!this.enabled){return}a.widget=this;this.event=a;this.handleMouseEvents(a);if(this.menu!==null&&this.menu.isVisible()){this.menu.handleEvent(a)}else{this.handleKeyEvents(a);this.handleMenu(a)}this.$super(a);a.stopPropagation();return false},handleMouseEvents:function(a){},handleKeyEvents:function(a){this.notifyModifyListener()},notifyModifyListener:function(){this.modifyListeners.forEach(function(a){if(a.modifyText){a.modifyText(this.event)}},this)},notifySelectionListener:function(){this.selectionListener.forEach(function(a){if(a.widgetSelected){a.widgetSelected(this.event)}},this)},removeSelectionListener:function(a){this.checkWidget();this.modifyListeners.remove(a);return this},removeSelectionListener:function(a){this.checkWidget();this.selectionListeners.remove(a);return this},setSelection:function(a){this.checkWidget();this.notifySelectionListener();return this},setText:function(a){this.handle.value=a;return this},unbindListener:function(a,b){gara.EventManager.removeListener(this.handle,a,b)},update:function(){this.checkWidget()}})});