//##############################################################################
// The $class Library, version 1.5
// Copyright 2006, Jeff Lau
// License: http://creativecommons.org/licenses/LGPL/2.1/
// Contact: jlau@uselesspickles.com
// Web:     www.uselesspickles.com
//##############################################################################
// Packed with Dean Edwards' Packer: http://dean.edwards.name/packer/
//##############################################################################
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('$v={2w:"1.5",1h:8(){1u{4.1m=2o}1U(1B){4.1m="2p"}4.1h=u("6 4.1m");6 4.1m},1k:8(){4.1C=1n("("+4.1h()+")");4.1k=u("6 4.1C");6 4.1C},1b:8(1f,24){c k=(K.15==2&&1f)?1f:{};c 1D=((K.15==2)?24:1f)||{};L(c i 1e 1D){k[i]=1D[i]}6 k},12:8(){}};8 $r(f){9(4 y $r){4.F=f;6}9(!f){$r.U=J;6}c 18=f.2q(".");c 19=$v.1k();L(c i=0;i<18.15;++i){c 16=19[18[i]];9(!16){16=a $r(18.2r(0,i+1).2s("."));19[18[i]]=16}19=16}$r.U=19}$r.q={C:8(){6 4.F},I:8(){6"[$r "+4.C()+"]"}};8 $3(f,j){9(4 y $3){4.F=f;4.1P=j.n;4.G=j.7;4.Q=j.p||(4.G==x?J:x);4.E={};9(4.G!=x){9(4.Q!=x){9(j.27$3){$v.12.q=4.Q.q;4.G.q=a $v.12();4.G.q.1x=4.G}4.E=$v.1b(4.Q.$3.E)}4.G.q.e$3=4}6}9($r.U){f=$r.U.C()+"."+f}c p=j.$S||x;c 1L=f.2t(/[^.]*\\./g,"");c 7=j.$1x||j[1L];c 1M$M=/\\2u\\.\\$M\\b/;c 25=/^\\s*8[^(]*\\([^)]*\\)[^{]*\\{\\s*(6)?\\s*;?\\s*\\}\\s*$/;9(!7){7=a u()}9(25.1N(7)){7.e$X=d;9(p!=x){7.e$1a=p.e$1a||p}}9(1M$M.1N(7)){7=$3.1p(7,p)}1I 9(!p.e$X){7=$3.1S(7,p)}7.$3=a $3(f,{7:7,p:p,27$3:d});9(j.$1K!=J){c t=j.$1K;9(!(t y 14)){t=[t]}L(c i=0,1g=t.15;i<1g;++i){$v.1b(7.$3.E,t[i].E)}}c 1w={$1x:d,$S:d,$1K:d,$10:d};1w[1L]=d;L(c A 1e j){9(1w.1R(A)){1G}c l=j[A];9(l y $3.1i){7[A]=l.l;1G}9(l y u&&1M$M.1N(l)){l=$3.1p(l,7.q[A])}7.q[A]=l}9(7.q.I==x.q.I){7.q.I=a u("6 \\"[1Y \\" + $3.1v(4) + \\"]\\";")}1n(f+" = 7;");9(j.$10){j.$10.2v(7)}}$3.q={C:8(){6 4.F},n:8(){6 4.1P},28:8(){6 4.G},29:8(){6 4.Q?4.Q.$3:J},2b:8(o){6 $3.1W(o,4.G)},1V:8(B){6 4.E.1R(B.C())},I:8(){6"[$3 "+4.F+"]"}};$3.1p=8(D,P){c k=a u("c m=K.1q;"+"c h=4.$M;"+"4.$M=m.e$11;"+"1u{6 m.e$W.13(4,K);}"+"2d{4.$M=h;}");k.e$W=D;k.e$11=P.e$1a||P;k.I=$3.1s;6 k};$3.1S=8(D,P){c k=a u("K.1q.e$11.13(4,K);"+(D.e$X?"":"K.1q.e$W.13(4,K);"));k.e$W=D;k.e$11=P.e$1a||P;k.I=$3.1s;9(D.e$X){k.e$1a=k.e$11}6 k};$3.1s=8(){6 N(4.e$W)};$3.1i=8(1t,l){4.1t=1t;4.l=l};$3.2f=8(1T){1u{6 1n("("+$v.1h()+"."+1T+")")}1U(1B){6 1z}};$3.1X=8(o,B){6 $3.1y(o).1V(B)};$3.1W=8(o,w){9(w y $H){6 $3.1X(o,w)}2h(2i o){T"1Y":6(o y w)||(o===J&&w==1c)||(o y R)&&(w==u);T"2j":6(w==1l);T"2k":6(w==N);T"2l":6(w==17);T"8":6(w==u)||(o y R)&&(w==R);T"1z":6(w==Z)}6 2m};$3.1v=8(o){6 $3.1y(o).C()};$3.1y=8(o){9(o==J){9(o===1z){6 Z.$3}6 1c.$3}6 o.e$3||x.$3};$3.2n=8(7,1A){9(7.$3&&7.$3.n()){6 7.13($v.1k(),1A)}1I{$v.12.q=7.q;c k=a $v.12();7.13(k,1A);6 k}};8 $H(f,j){9(4 y $H){4.F=f;4.O={};4.Y=J;4.E={};4.E[f]=4;6}9($r.U){f=$r.U.C()+"."+f}c B=a $H(f);9(j.$S!=J){c t=j.$S;9(!(t y 14)){t=[t]}L(c i=0,1g=t.15;i<1g;++i){$v.1b(B.O,t[i].O);$v.1b(B.E,t[i].E)}}L(c A 1e j){9(A=="$S"){1G}c l=j[A];9(l y $3.1i){B[A]=l.l}1I{B.O[A]=B.F}}1n(f+" = B;")}$H.q={C:8(){6 4.F},2a:8(1d){6 17(4.O[1d])},2c:8(){9(!4.Y){4.Y=[];L(c 1d 1e 4.O){4.Y.2e(1d)}}6 4.Y},I:8(){6"[$H "+4.F+"]"}};8 $2g(D){6 D}8 $10(l){6 a $3.1i("10",l)}8 $V(D){6 D}$r.$3=a $3("$r",{7:$r});$3.$3=a $3("$3",{7:$3});$H.$3=a $3("$H",{7:$H});x.$3=a $3("x",{n:d,7:x});x.e$X=d;14.$3=a $3("14",{n:d,7:14});N.$3=a $3("N",{n:d,7:N});1l.$3=a $3("1l",{n:d,7:1l});17.$3=a $3("17",{n:d,7:17});u.$3=a $3("u",{n:d,7:u});R.$3=a $3("R",{n:d,7:R,p:u});1E.$3=a $3("1E",{n:d,7:1E});z.$3=a $3("z",{n:d,7:z});1F.$3=a $3("1F",{n:d,7:1F,p:z});1H.$3=a $3("1H",{n:d,7:1H,p:z});1J.$3=a $3("1J",{n:d,7:1J,p:z});1O.$3=a $3("1O",{n:d,7:1O,p:z});1o.$3=a $3("1o",{n:d,7:1o,p:z});1r.$3=a $3("1r",{n:d,7:1r,p:z});$3("Z",{Z:$V(8(){1Z a z("20 21 22 23 Z 3.")})});$3("1c",{1c:$V(8(){1Z a z("20 21 22 23 1c 3.")})});$3("1Q",{$S:z,1Q:8(1j){4.1j=N(1j);4.f=$3.1v(4)},C:$V(8(){6 4.f}),26:$V(8(){6 4.1j}),I:$V(8(){6"[1B "+4.C()+"] "+4.26()})});',62,157,'|||class|this||return|ctor|function|if|new||var|true|_|name||||descriptor|result|value||isNative|obj|baseCtor|prototype|package||ifaces|Function|class_library|type|Object|instanceof|Error|propertyName|iface|getName|method|_interfaces|_name|_ctor|interface|toString|null|arguments|for|base|String|_methods|baseMethod|_baseCtor|RegExp|extends|case|_currentPackage|final|class_wrappedMethod|class_isTrivialCtor|_methodsArray|Undefined|static|class_baseMethod|_surrogateCtor|apply|Array|length|nextContext|Boolean|components|context|class_relevantImplementation|_copyObject|Null|methodName|in|obj1|ifacesLength|_getGlobalObjectName|_ModifiedProperty|message|_getGlobalObject|Number|_globalObjectName|eval|TypeError|_wrapExtendedMethod|callee|URIError|_wrappedMethod_toString|modifier|try|typeOf|specialProperties|constructor|getClass|undefined|args|error|_globalObject|source|Date|EvalError|continue|RangeError|else|ReferenceError|implements|ctorName|uses|test|SyntaxError|_isNative|Exception|hasOwnProperty|_wrapExtendedCtor|qualifiedName|catch|implementsInterface|instanceOf|implementationOf|object|throw|Attempted|instantiation|of|the|obj2|isTrivialCtor|getMessage|calledFrom|getConstructor|getSuperclass|hasMethod|isInstance|getMethods|finally|push|resolve|abstract|switch|typeof|number|string|boolean|false|instantiate|GLOBAL_NAMESPACE_OBJECT_NAME|self|split|slice|join|replace|bthis|call|version'.split('|'),0,{}))

if(!Array.prototype.contains){
Array.prototype.contains=function(_1){
return base2.Array2.contains(this,_1);
};
}
if(!Array.prototype.forEach){
Array.prototype.forEach=function(_2,_3){
return base2.Array2.forEach(this,_2,_3);
};
}
if(!Array.prototype.indexOf){
Array.prototype.indexOf=function(_4,_5){
return base2.Array2.indexOf(this,_4,_5);
};
}
if(!Array.prototype.insertAt){
Array.prototype.insertAt=function(_6,_7){
return base2.Array2.insertAt(this,_6,_7);
};
}
if(!Array.prototype.insertBefore){
Array.prototype.insertBefore=function(_8,_9){
return base2.Array2.insertBefore(this,_8,_9);
};
}
if(!Array.prototype.lastIndexOf){
Array.prototype.lastIndexOf=function(_a,_b){
return base2.Array2.lastIndexOf(this,_a,_b);
};
}
if(!Array.prototype.remove){
Array.prototype.remove=function(_c){
return base2.Array2.remove(this,_c);
};
}
if(!Array.prototype.removeAt){
Array.prototype.removeAt=function(_d){
return base2.Array2.removeAt(this,_d);
};
}
var gara={};
new function(){
$class("Namespace",{imports:"",exports:"",namespace:"",name:"",$constructor:function(_e){
this.name=_e.name||"gara";
this.imports=_e.imports||"";
this.exports=_e.exports||"";
if(this.name!="gara"){
this.name="gara."+this.name;
}
var _f=("gara,"+this.imports).split(",");
this.imports="";
_f.forEach(function(v,k,arr){
if(gara[v]){
this.imports+=gara[v].namespace;
}
},this);
var _13=this.exports.split(",");
this.exports="";
_13.forEach(function(v,k,arr){
this.exports+=this.name+"."+v+"="+v+";";
this.namespace+="var "+v+"="+this.name+"."+v+";";
},this);
}});
var _17=new Namespace({exports:"Namespace",name:"gara"});
$class("EventManager",{_listeners:[],$constructor:function(){
window.addEventListener("unload",this,false);
},addListener:function(_18,_19,_1a){
_18.addEventListener(_19,_1a,false);
var _1b={domNode:_18,type:_19,listener:_1a};
this._listeners.push(_1b);
return _1b;
},handleEvent:function(e){
if(e.type=="unload"){
this._unregisterAllEvents();
}
},removeListener:function(e){
e.domNode.removeEventListener(e.type,e.listener,false);
if(this._listeners.contains(e)){
this._listeners.remove(e);
}
},_unregisterAllEvents:function(){
while(this._listeners.length>0){
var _1e=this._listeners.pop();
this.removeListener(_1e);
}
},toString:function(){
return "[gara.EventManager]";
}});
gara.eventManager=new EventManager();
$class("OutOfBoundsException",{$extends:Exception,$constructor:function(_1f){
this.message=String(_1f);
this.name=$class.typeOf(this);
}});
var _20=gara.onDOMLoaded=function(f){
if(document.addEventListener){
document.addEventListener("DOMContentLoaded",f,false);
}else{
if(window.ActiveX){
document.write("<scr"+"ipt id=__ie_onload defer src=javascript:void(0)></script>");
var _22=document.getElementById("__ie_onload");
_22.onreadystatechange=function(){
if(this.readyState=="complete"){
f();
}
};
}else{
if(/WebKit/i.test(navigator.userAgent)){
var _23=setInterval(function(){
if(/loaded|complete/.test(document.readyState)){
f();
}
},10);
}else{
window.onload=f;
}
}
}
};
eval(_17.exports);
gara.namespace=_17.namespace;
gara.toString=function(){
return "[gara]";
};
};
delete Namespace;
delete EventManager;
delete OutOfBoundsException;
gara.jswt={};
new function(){
var _24=new gara.Namespace({name:"jswt",exports:"Widget,Control,List,Tree,Item,ListItem,TreeItem,FocusListener,SelectionListener",imports:"gara"});
eval(_24.imports);
$interface("FocusListener",{focusGained:function(){
},focusLost:function(){
},toString:function(){
return "[gara.jswt.FocusListener]";
}});
$interface("SelectionListener",{widgetSelected:function(_25){
},toString:function(){
return "[gara.jswt.SelectionListener]";
}});
function strReplace(_26,_27,_28){
output=""+_26;
while(output.indexOf(_27)>-1){
pos=output.indexOf(_27);
output=""+(output.substring(0,pos)+_28+output.substring((pos+_27.length),output.length));
}
return output;
}
$class("Widget",{domref:null,$constructor:function(){
this._className="";
this._baseClass="";
this._listener={};
},addClassName:function(_29){
this._className+=" "+_29;
this._changed=true;
},addListener:function(_2a,_2b){
if(!this._listener.hasOwnProperty(_2a)){
this._listener[_2a]=new Array();
}
this._listener[_2a].push(_2b);
this.registerListener(_2a,_2b);
},getClassName:function(){
return this._className;
},registerListener:$abstract(function(_2c,_2d){
}),removeClassName:function(_2e){
this._className=strReplace(this._className,_2e,"");
this._changed=true;
},removeListener:function(_2f,_30){
this._listener[_2f].remove(_30);
},setClassName:function(_31){
this._className=_31;
this._changed=true;
},toString:function(){
return "[gara.jswt.Widget]";
}});
$class("Control",{$extends:Widget,$constructor:function(){
this.$base();
this._focusListener=[];
this._hasFocus=false;
_32.addControl(this);
this.addFocusListener(_32);
},addFocusListener:function(_33){
if(!$class.implementationOf(_33,gara.jswt.FocusListener)){
throw new TypeError("listener is not a gara.jswt.FocusListener");
}
this._focusListener.push(_33);
},forceFocus:function(){
this._hasFocus=true;
this.removeClassName(this._baseClass+"Inactive");
this.addClassName(this._baseClass+"Active");
this.update();
for(var i=0,len=this._focusListener.length;i<len;++i){
this._focusListener[i].focusGained(this);
}
},handleEvent:$abstract(function(e){
}),isFocusControl:function(){
return this._hasFocus;
},looseFocus:function(){
this._hasFocus=false;
this.removeClassName(this._baseClass+"Active");
this.addClassName(this._baseClass+"Inactive");
this.update();
for(var i=0,len=this._focusListener.length;i<len;++i){
this._focusListener[i].focusLost(this);
}
},removeFocusListener:function(_39){
if(!_39.$class.implementsInterface(gara.jswt.FocusListener)){
throw new TypeError("listener is not a gara.jswt.FocusListener");
}
if(this._focusListener.contains(_39)){
this._focusListener.remove(_39);
}
},toString:function(){
return "[gara.jswt.Control";
},update:$abstract(function(){
})});
$class("List",{$extends:Control,$constructor:function(_3a){
this.$base();
this._items=[];
this._selection=[];
this._selectionListener=[];
this._activeItem=null;
this._shiftItem=null;
this._parentNode=_3a;
this._className=this._baseClass="jsWTList";
},_activateItem:function(_3b){
if(!$class.instanceOf(_3b,gara.jswt.ListItem)){
throw new TypeError("item is not type of gara.jswt.ListItem");
}
if(this._activeItem!=null){
this._activeItem.setActive(false);
}
this._activeItem=_3b;
this._activeItem.setActive(true);
this.update();
},addItem:function(_3c){
if(!$class.instanceOf(_3c,gara.jswt.ListItem)){
throw new TypeError("item is not type of gara.jswt.ListItem");
}
this._items.push(_3c);
},addSelectionListener:function(_3d){
if(!$class.instanceOf(_3d,gara.jswt.SelectionListener)){
throw new TypeError("listener is not instance of gara.jswt.SelectionListener");
}
this._selectionListener.push(_3d);
},deselect:function(_3e){
if(!$class.instanceOf(_3e,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(this._selection.contains(_3e)){
this._selection.remove(_3e);
this.notifySelectionListener();
_3e.setUnselected();
this._shiftItem=_3e;
this._activateItem(_3e);
}
},deselectAll:function(){
for(var i=0,len=this._items.length;i<len;++i){
this.deselect(this._items[i]);
}
this.update();
},getItem:function(_41){
if(_41>=this._items.length){
throw new OutOfBoundsException("Your item lives outside of this list");
}
return this._items[_41];
},getItemCount:function(){
return this._items.length;
},getItems:function(){
return this._items;
},getSelection:function(){
return this._selection;
},getSelectionCount:function(){
return this._selection.length;
},handleEvent:function(e){
var obj=e.target.obj||null;
switch(e.type){
case "mousedown":
if(!this._hasFocus){
this.forceFocus();
}
if($class.instanceOf(obj,gara.jswt.ListItem)){
var _44=obj;
if(!e.ctrlKey&&!e.shiftKey){
this.select(_44,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_44,true);
}else{
if(e.shiftKey){
this.selectRange(_44,false);
}else{
if(e.ctrlKey){
if(this._selection.contains(_44)){
this.deselect(_44);
}else{
this.select(_44,true);
}
}else{
this.select(_44);
}
}
}
}
}
break;
}
e.stopPropagation();
},_handleKeyEvent:function(e){
if(this._activeItem==null){
return;
}
switch(e.keyCode){
case 38:
var _46=false;
var _47=this.indexOf(this._activeItem);
if(_47!=0){
_46=this._items[_47-1];
}
if(_46){
if(!e.ctrlKey&&!e.shiftKey){
this.select(_46,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_46,true);
}else{
if(e.shiftKey){
this.selectRange(_46,false);
}else{
if(e.ctrlKey){
this._activateItem(_46);
}
}
}
}
}
break;
case 40:
var _48=false;
var _47=this.indexOf(this._activeItem);
if(_47!=this._items.length-1){
_48=this._items[_47+1];
}
if(_48){
if(!e.ctrlKey&&!e.shiftKey){
this.select(_48,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_48,true);
}else{
if(e.shiftKey){
this.selectRange(_48,false);
}else{
if(e.ctrlKey){
this._activateItem(_48);
}
}
}
}
}
break;
case 32:
if(this._selection.contains(this._activeItem)&&e.ctrlKey){
this.deselect(this._activeItem);
}else{
this.select(this._activeItem,true);
}
break;
case 36:
if(!e.ctrlKey&&!e.shiftKey){
this.select(this._items[0],false);
}else{
if(e.shiftKey){
this.selectRange(this._items[0],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[0]);
}
}
}
break;
case 35:
var _49=this._items.length-1;
if(!e.ctrlKey&&!e.shiftKey){
this.select(this._items[_49],false);
}else{
if(e.shiftKey){
this.selectRange(this._items[_49],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[_49]);
}
}
}
break;
}
},indexOf:function(_4a){
if(!$class.instanceOf(_4a,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(!this._items.contains(_4a)){
throw new gara.jswt.ItemNotExistsException("item ["+_4a+"] does not exists in this list");
return;
}
return this._items.indexOf(_4a);
},notifySelectionListener:function(){
for(var i=0,len=this._selectionListener.length;i<len;++i){
this._selectionListeners[i].widgetSelected(this);
}
},registerListener:function(_4d,_4e){
if(this.domref!=null){
gara.eventManager.addListener(this.domref,_4d,_4e);
}
},removeSelectionListener:function(_4f){
if(!$class.instanceOf(_4f,gara.jswt.SelectionListener)){
throw new TypeError("listener is not instance of gara.jswt.SelectionListener");
}
if(this._selectionListener.contains(_4f)){
this._selectionListener.remove(_4f);
}
},select:function(_50,_51){
if(!$class.instanceOf(_50,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(!_51){
while(this._selection.length){
this._selection.pop().setUnselected();
}
}
if(!this._selection.contains(_50)){
this._selection.push(_50);
_50.setSelected();
this._shiftItem=_50;
this._activateItem(_50);
this.notifySelectionListener();
}
},selectAll:function(){
for(var i=0,len=this._items.length;i<len;++i){
this.select(this._items[i],true);
}
this.update();
},selectRange:function(_54,_55){
if(!$class.instanceOf(_54,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(!_55){
while(this._selection.length){
this._selection.pop().setUnselected();
}
}
var _56=this.indexOf(this._shiftItem);
var _57=this.indexOf(_54);
var _58=_56>_57?_57:_56;
var to=_56<_57?_57:_56;
for(var i=_58;i<=to;++i){
this._selection.push(this._items[i]);
this._items[i].setSelected();
}
this.notifySelectionListener();
this._activateItem(_54);
},toString:function(){
return "[gara.jswt.List]";
},update:function(){
if(this.domref==null){
this.domref=document.createElement("ul");
this.domref.obj=this;
this.domref.control=this;
var _5b={};
for(var _5c in this._listener){
_5b[_5c]=this._listener[_5c].concat([]);
}
this.addListener("mousedown",this);
for(var _5c in _5b){
_5b[_5c].forEach(function(_5d,_5e,arr){
this.registerListener(_5c,_5d);
},this);
}
this._parentNode.appendChild(this.domref);
}
this.domref.className=this._className;
this._items.forEach(function(_60,_61,arr){
if(!_60.isCreated()){
node=_60.create();
this.domref.appendChild(node);
}
if(_60.hasChanged()){
_60.update();
_60.releaseChange();
}
},this);
}});
$class("Tree",{$extends:Control,$constructor:function(_63){
this.$base();
this._showLines=true;
this._shiftItem=null;
this._activeItem=null;
this._parentNode=_63;
this._className=this._baseClass="jsWTTree";
this._selection=[];
this._items=[];
this._firstLevelItems=[];
},_activateItem:function(_64){
if(this._activeItem!=null){
this._activeItem.setActive(false);
}
this._activeItem=_64;
this._activeItem.setActive(true);
this.update();
},_addFirstLevelItem:function(_65){
if(!$class.instanceOf(_65,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
this._firstLevelItems.push(_65);
},_addItem:function(_66){
if(!$class.instanceOf(_66,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
var _67=_66.getParent();
if(_67==this){
this._items.push(_66);
}else{
var _68=this._items.indexOf(_67)+getDescendents(_67)+1;
this._items.splice(_68,0,_66);
}
function getDescendents(_69){
var _6a=0;
if(_69.hasChilds()){
_69.getItems().forEach(function(_6b,_6c,arr){
if(_6b.hasChilds()){
_6a+=getDescendents(_6b);
}
_6a++;
},this);
}
return _6a;
}
},deselect:function(_6e){
if(!$class.instanceOf(_6e,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(this._selection.contains(_6e)&&_6e.getTree()==this){
this._selection.remove(_6e);
this.notifySelectionListener();
_6e.setUnselected();
this._shiftItem=_6e;
this._activateItem(_6e);
}
},deselectAll:function(){
for(var i=this._selection.length;i>=0;--i){
this.deselect(this._selection[i]);
}
this.update();
},handleEvent:function(e){
var obj=e.target.obj||null;
switch(e.type){
case "mousedown":
if(!this._hasFocus){
this.forceFocus();
}
if($class.instanceOf(obj,gara.jswt.TreeItem)){
var _72=obj;
if(e.ctrlKey&&!e.shiftKey){
if(this._selection.contains(_72)){
this.deselect(_72);
}else{
this.select(_72,true);
}
}else{
if(!e.ctrlKey&&e.shiftKey){
this.selectRange(_72,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_72,true);
}else{
this.select(_72,false);
}
}
}
}
break;
case "dblclick":
if($class.instanceOf(obj,gara.jswt.TreeItem)){
var _72=obj;
_72.toggleChilds();
}
break;
}
e.stopPropagation();
},_handleKeyEvent:function(e){
if(this._activeItem==null){
return;
}
switch(e.keyCode){
case 38:
var _74;
var _75;
if(this._activeItem==this._items[0]){
_74=false;
}else{
var _76=this._activeItem.getParent();
if(_76==this){
_75=this._firstLevelItems;
}else{
_75=_76.getItems();
}
var _77=_75.indexOf(this._activeItem);
if(_77==0){
_74=_76;
}else{
var _78=_75[_77-1];
_74=getLastItem(_78);
}
}
if(_74){
if(!e.ctrlKey&&!e.shiftKey){
this.select(_74,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_74,true);
}else{
if(e.shiftKey){
this.selectRange(_74,false);
}else{
if(e.ctrlKey){
this._activateItem(_74);
}
}
}
}
}
break;
case 40:
var _79;
var _75;
if(this._activeItem==this._items[this._items.length-1]){
_79=false;
}else{
var _76=this._activeItem.getParent();
if(_76==this){
_75=this._firstLevelItems;
}else{
_75=_76.getItems();
}
var _77=_75.indexOf(this._activeItem);
if(this._activeItem.hasChilds()&&this._activeItem.isExpanded()){
_79=this._activeItem.getItems()[0];
}else{
if(this._activeItem.hasChilds()&&!this._activeItem.isExpanded()){
_79=this._items[this._items.indexOf(this._activeItem)+countItems(this._activeItem)+1];
}else{
_79=this._items[this._items.indexOf(this._activeItem)+1];
}
}
}
if(_79){
if(!e.ctrlKey&&!e.shiftKey){
this.select(_79,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_79,true);
}else{
if(e.shiftKey){
this.selectRange(_79,false);
}else{
if(e.ctrlKey){
this._activateItem(_79);
}
}
}
}
}
break;
case 37:
var _7a=this._activeItem;
this._activeItem.collapse();
this._activateItem(_7a);
this.update();
break;
case 39:
this._activeItem.expand();
this.update();
break;
case 32:
if(this._selection.contains(this._activeItem)&&e.ctrlKey){
this.deselect(this._activeItem);
}else{
this.select(this._activeItem,true);
}
break;
case 36:
if(!e.ctrlKey&&!e.shiftKey){
this.select(this._items[0],false);
}else{
if(e.shiftKey){
this.selectRange(this._items[0],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[0]);
}
}
}
break;
case 35:
if(!e.ctrlKey&&!e.shiftKey){
this.select(this._items[this._items.length-1],false);
}else{
if(e.shiftKey){
this.selectRange(this._items[this._items.length-1],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[this._items.length-1]);
}
}
}
break;
}
function getLastItem(_7b){
if(_7b.isExpanded()&&_7b.hasChilds()){
return getLastItem(_7b.getItems()[_7b.getItems().length-1]);
}else{
return _7b;
}
}
function countItems(_7c){
var _7d=0;
var _7e=_7c.getItems();
for(var i=0;i<_7e.length;++i){
_7d++;
if(_7e[i].hasChilds()){
_7d+=countItems(_7e[i]);
}
}
return _7d;
}
},indexOf:function(_80){
if(!$class.instanceOf(_80,gara.jswt.TreeItem)){
throw new TypeError("item not instance of gara.jswt.TreeItem");
}
if(!this._items.contains(_80)){
console.log("des item gibts hier ned: "+_80.getText());
return;
}
return this._items.indexOf(_80);
},notifySelectionListener:function(){
},registerListener:function(_81,_82){
if(this.domref!=null){
gara.eventManager.addListener(this.domref,_81,_82);
}
},select:function(_83,_84){
if(!$class.instanceOf(_83,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(!_84){
while(this._selection.length){
this._selection.pop().setUnselected();
}
}
if(!this._selection.contains(_83)&&_83.getTree()==this){
this._selection.push(_83);
_83.setSelected();
this._shiftItem=_83;
this._activateItem(_83);
this.notifySelectionListener();
}
},selectAll:function(){
this._items.forEach(function(_85,_86,arr){
this.select(_85,true);
},this);
this.update();
},selectRange:function(_88,_89){
if(!$class.instanceOf(_88,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(!_89){
while(this._selection.length){
this._selection.pop().setUnselected();
}
}
var _8a=this.indexOf(this._shiftItem);
var _8b=this.indexOf(_88);
var _8c=_8a>_8b?_8b:_8a;
var to=_8a<_8b?_8b:_8a;
for(var i=_8c;i<=to;++i){
this._selection.push(this._items[i]);
this._items[i].setSelected();
}
this._activateItem(_88);
this.notifySelectionListener();
},toString:function(){
return "[gara.jswt.Tree]";
},update:function(){
if(this.domref==null){
this.domref=document.createElement("ul");
this.domref.obj=this;
this.domref.control=this;
var _8f={};
for(var _90 in this._listener){
_8f[_90]=this._listener[_90].concat([]);
}
this.addListener("mousedown",this);
this.addListener("dblclick",this);
for(var _90 in _8f){
_8f[_90].forEach(function(_91,_92,arr){
this.registerListener(_90,_91);
},this);
}
this._parentNode.appendChild(this.domref);
}
this.removeClassName("jsWTTreeNoLines");
this.removeClassName("jsWTTreeLines");
if(this._showLines){
this.addClassName("jsWTTreeLines");
}else{
this.addClassName("jsWTTreeNoLines");
}
this.domref.className=this._className;
this._updateItems(this._firstLevelItems,this.domref);
},_updateItems:function(_94,_95){
var _96=_94.length;
_94.forEach(function(_97,_98,arr){
var _9a=(_98+1)==_96;
if(!_97.isCreated()){
_97.create(_9a);
_95.appendChild(_97.domref);
}
if(_97.hasChanged()){
_97.update();
_97.releaseChange();
}
if(_97.hasChilds()){
var _9b=_97._getChildContainer();
this._updateItems(_97.getItems(),_9b);
}
if(_9a&&_97.getClassName().indexOf("bottom")==-1){
_97.addClassName("bottom");
if(_97.hasChilds()){
var cc=_97.getChildContainer();
cc.className="bottom";
}
}else{
if(!_9a&&_97.getClassName().indexOf("bottom")!=-1){
_97.removeClassName("bottom");
if(_97.hasChilds()){
var cc=_97.getChildContainer();
cc.className=null;
}
}
}
},this);
}});
$class("Item",{$extends:Widget,$constructor:function(){
this.$base();
this._changed=false;
this._image=null;
this._text="";
},getImage:function(){
return this._image;
},getText:function(){
return this._text;
},hasChanged:function(){
return this._changed;
},isCreated:function(){
return this.domref!=null;
},releaseChange:function(){
this._changed=false;
},setActive:function(_9d){
this._active=_9d;
if(_9d){
this.addClassName("active");
}else{
this.removeClassName("active");
}
this._changed=true;
},setImage:function(_9e){
if(!$class.instanceOf(_9e,Image)){
throw new TypeError("image not instance of Image");
}
this._image=_9e;
this._changed=true;
},setSelected:function(){
this.addClassName("selected");
},setText:function(_9f){
this._text=_9f;
this._changed=true;
},setUnselected:function(){
this.removeClassName("selected");
},toString:function(){
return "[gara.jswt.Item]";
}});
$class("ListItem",{$extends:Item,$constructor:function(_a0){
if(!$class.instanceOf(_a0,gara.jswt.List)){
throw new TypeError("list is not type of gara.jswt.List");
}
this.$base();
this._list=_a0;
this._list.addItem(this);
this._span=null;
this._spanText=null;
this._img=null;
},create:function(){
this.domref=document.createElement("li");
this.domref.className=this._className;
this.domref.obj=this;
this.domref.control=this._list;
this._img=null;
if(this.image!=null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._list;
this._img.src=this.image.src;
this._img.alt=this._text;
this.domref.appendChild(this._img);
}
this._spanText=document.createTextNode(this._text);
this._span=document.createElement("span");
this._span.obj=this;
this._span.control=this._list;
this._span.appendChild(this._spanText);
this.domref.appendChild(this._span);
for(var _a1 in this._listener){
this._listener[_a1].forEach(function(_a2,_a3,arr){
this.registerListener(_a1,_a2);
},this);
}
return this.domref;
},registerListener:function(_a5,_a6){
if(this._img!=null){
gara.eventManager.addListener(this._img,_a5,_a6);
}
if(this._span!=null){
gara.eventManager.addListener(this._span,_a5,_a6);
}
},toString:function(){
return "[gara.jswt.ListItem]";
},update:function(){
if(this.image!=null&&this._img==null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._list;
this._img.alt=this.sText;
this._img.src=this.image.src;
this.domref.insertBefore(this._img,this._span);
for(var _a7 in this._listener){
this._listener[_a7].forEach(function(_a8,_a9,arr){
this.registerListener(this._img,_a7,_a8);
},this);
}
}else{
if(this.image!=null){
this._img.src=this.image.src;
this._img.alt=this._text;
}else{
if(this._img!=null&&this.image==null){
this.domref.removeChild(this._img);
this._img=null;
for(var _a7 in this._listener){
this._listener[_a7].forEach(function(_ab,_ac,arr){
gara.eventManager.removeListener({domNode:this._img,type:_a7,listener:_ab});
},this);
}
}
}
}
this._spanText.value=this._text;
this.domref.className=this._className;
}});
$class("TreeItem",{$extends:Item,$constructor:function(_ae){
this.$base();
if(!($class.instanceOf(_ae,gara.jswt.Tree)||$class.instanceOf(_ae,gara.jswt.TreeItem))){
throw new TypeError("parentWidget is neither a gara.jswt.Tree or gara.jswt.TreeItem");
}
this._childs=new Array();
this._isExpanded=true;
this._changed=false;
this._childContainer=null;
this._parent=_ae;
this._tree=null;
if($class.instanceOf(_ae,gara.jswt.Tree)){
this._tree=_ae;
this._tree._addFirstLevelItem(this);
}else{
if($class.instanceOf(_ae,gara.jswt.TreeItem)){
this._tree=_ae.getTree();
this._tree._addItem(this);
}
}
_ae._addItem(this);
this._img=null;
this._toggler=null;
this._span=null;
this._spanText=null;
},_addItem:function(_af){
if(!$class.instanceOf(_af,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
this._childs.push(_af);
},collapse:function(){
if(this._childContainer!=null){
this._childContainer.style.display="none";
}
this._deselectChilds();
this._isExpanded=false;
this._changed=true;
},create:function(_b0){
if(_b0){
this.addClassName("bottom");
}
this.domref=document.createElement("li");
this.domref.className=this._className;
this.domref.obj=this;
this.domref.control=this._tree;
this._toggler=document.createElement("span");
this._toggler.obj=this;
this._toggler.control=this._tree;
this._span=document.createElement("span");
this._span.obj=this;
this._span.control=this._tree;
this._span.className="text";
this._spanText=document.createTextNode(this._text);
this._span.appendChild(this._spanText);
this._toggler.className="toggler";
this._toggler.className+=this.hasChilds()?(this.isExpanded()?" togglerExpanded":" togglerCollapsed"):"";
this.domref.appendChild(this._toggler);
if(this._image!=null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.src=this._image.src;
this._img.control=this._tree;
this.domref.appendChild(this._img);
}
this.domref.appendChild(this._span);
if(this.hasChilds()){
this._createChildContainer();
}
},_createChildContainer:function(){
this._childContainer=document.createElement("ul");
if(this.getClassName().indexOf("bottom")!=-1){
this._childContainer.className="bottom";
}
if(this.isExpanded()){
this._childContainer.style.display="block";
}else{
this._childContainer.style.display="none";
}
this.domref.appendChild(this._childContainer);
},_deselectChilds:function(){
this._childs.forEach(function(_b1,_b2,arr){
if(_b1.hasChilds()){
_b1._deselectChilds();
}
this._tree.deselect(_b1);
},this);
},expand:function(){
if(this._childContainer!=null){
this._childContainer.style.display="block";
}
this._isExpanded=true;
this._changed=true;
},_getChildContainer:function(){
if(this._childContainer==null){
this._createChildContainer();
}
return this._childContainer;
},getItemCount:function(){
return this._childs.length;
},getItems:function(){
return this._childs;
},getParent:function(){
return this._parent;
},getTree:function(){
return this._tree;
},hasChilds:function(){
return this._childs.length>0;
},isExpanded:function(){
return this._isExpanded;
},registerListener:function(_b4,_b5){
if(this._img!=null){
gara.eventManager.addListener(this._img,_b4,_b5);
}
if(this._span!=null){
gara.eventManager.addListener(this._span,_b4,_b5);
}
},setActive:function(_b6){
this._active=_b6;
if(_b6){
this._span.className+=" active";
}else{
this._span.className=this._span.className.replace(/ *active/,"");
}
this._changed=true;
},setChildContainer:function(_b7){
this._childContainer=_b7;
},setSelected:function(){
if((this._parent!=this._tree&&this._parent.isExpanded())||this._parent==this._tree){
this._span.className="text selected";
}
},setUnselected:function(){
this._span.className="text";
},toggleChilds:function(){
if(this.isExpanded()){
this.collapse();
}else{
this.expand();
}
if(!this._tree.isFocusControl()){
this._tree.forceFocus();
}
this._tree.update();
},toString:function(){
return "[gara.jswt.TreeItem]";
},update:function(){
if(this.hasChilds()){
this._toggler.className=strReplace(this._toggler.className," togglerCollapsed","");
this._toggler.className=strReplace(this._toggler.className," togglerExpanded","");
if(this.isExpanded()){
this._toggler.className+=" togglerExpanded";
}else{
this._toggler.className+=" togglerCollapsed";
}
}
if(this._image!=null&&this._img==null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._tree;
this._img.alt=this._text;
this._img.src=this._image.src;
this.domref.insertBefore(this._img,this._span);
}else{
if(this._image!=null){
this._img.src=this._image.src;
this._img.alt=this._text;
}else{
if(this._img!=null&&this._image==null){
this.domref.removeChild(this._img);
this._img=null;
}
}
}
if(this.hasChilds()&&this._childContainer==null){
this._createChildContainer();
}else{
if(!this.hasChilds()&&this._childContainer!=null){
this.domref.removeChild(this._childContainer);
this._childContainer=null;
}
}
this.domref.className=this._className;
}});
$class("ControlManager",{$implements:FocusListener,$constructor:function(){
this._activeControl=null;
this._controls=[];
gara.eventManager.addListener(window,"keydown",this);
gara.eventManager.addListener(window,"mousedown",this);
},addControl:function(_b8){
if(!this._controls.contains(_b8)){
this._controls.push(_b8);
}
},focusGained:function(_b9){
if(!$class.instanceOf(_b9,gara.jswt.Control)){
throw new TypeError("control is not a gara.jswt.Control");
}
this._activeControl=_b9;
},focusLost:function(_ba){
if(!$class.instanceOf(_ba,gara.jswt.Control)){
throw new TypeError("control is not a gara.jswt.Control");
}
if(this._activeControl==_ba){
this._activeControl=null;
}
},handleEvent:function(e){
if(e.type=="keydown"){
if(this._activeControl!=null&&this._activeControl._handleKeyEvent){
this._activeControl._handleKeyEvent(e);
}
}
if(e.type=="mousedown"){
if(this._activeControl!=null&&e.target.control&&e.target.control!=this._activeControl){
this._activeControl.looseFocus();
this._activeControl=null;
}
}
},removeControl:function(_bc){
if(!$class.instanceOf(_bc,gara.jswt.Control)){
throw new TypeError("control is not a gara.jswt.Control");
}
if(this._controls.contains(_bc)){
if(this._activeControl==_bc){
this._activeControl=null;
}
this._controls.remove(_bc);
}
},toString:function(){
return "[gara.jswt.ControlManager]";
}});
var _32=new ControlManager();
eval(_24.exports);
gara.jswt.namespace=_24.namespace;
gara.jswt.toString=function(){
return "[gara.jswt]";
};
};
delete Control;
delete ControlManager;
delete FocusListener;
delete Item;
delete ItemNotExistsException;
delete List;
delete Tree;
delete ListItem;
delete TreeItem;
delete SelectionListener;
delete Widget;


