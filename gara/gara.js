//##############################################################################
// The $class Library, version 1.5
// Copyright 2006, Jeff Lau
// License: http://creativecommons.org/licenses/LGPL/2.1/
// Contact: jlau@uselesspickles.com
// Web:     www.uselesspickles.com
//##############################################################################
// Packed with Dean Edwards' Packer: http://dean.edwards.name/packer/
//##############################################################################
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('$v={2w:"1.5",1h:8(){1u{4.1m=2o}1U(1B){4.1m="2p"}4.1h=u("6 4.1m");6 4.1m},1k:8(){4.1C=1n("("+4.1h()+")");4.1k=u("6 4.1C");6 4.1C},1b:8(1f,24){c k=(K.15==2&&1f)?1f:{};c 1D=((K.15==2)?24:1f)||{};L(c i 1e 1D){k[i]=1D[i]}6 k},12:8(){}};8 $r(f){9(4 y $r){4.F=f;6}9(!f){$r.U=J;6}c 18=f.2q(".");c 19=$v.1k();L(c i=0;i<18.15;++i){c 16=19[18[i]];9(!16){16=a $r(18.2r(0,i+1).2s("."));19[18[i]]=16}19=16}$r.U=19}$r.q={C:8(){6 4.F},I:8(){6"[$r "+4.C()+"]"}};8 $3(f,j){9(4 y $3){4.F=f;4.1P=j.n;4.G=j.7;4.Q=j.p||(4.G==x?J:x);4.E={};9(4.G!=x){9(4.Q!=x){9(j.27$3){$v.12.q=4.Q.q;4.G.q=a $v.12();4.G.q.1x=4.G}4.E=$v.1b(4.Q.$3.E)}4.G.q.e$3=4}6}9($r.U){f=$r.U.C()+"."+f}c p=j.$S||x;c 1L=f.2t(/[^.]*\\./g,"");c 7=j.$1x||j[1L];c 1M$M=/\\2u\\.\\$M\\b/;c 25=/^\\s*8[^(]*\\([^)]*\\)[^{]*\\{\\s*(6)?\\s*;?\\s*\\}\\s*$/;9(!7){7=a u()}9(25.1N(7)){7.e$X=d;9(p!=x){7.e$1a=p.e$1a||p}}9(1M$M.1N(7)){7=$3.1p(7,p)}1I 9(!p.e$X){7=$3.1S(7,p)}7.$3=a $3(f,{7:7,p:p,27$3:d});9(j.$1K!=J){c t=j.$1K;9(!(t y 14)){t=[t]}L(c i=0,1g=t.15;i<1g;++i){$v.1b(7.$3.E,t[i].E)}}c 1w={$1x:d,$S:d,$1K:d,$10:d};1w[1L]=d;L(c A 1e j){9(1w.1R(A)){1G}c l=j[A];9(l y $3.1i){7[A]=l.l;1G}9(l y u&&1M$M.1N(l)){l=$3.1p(l,7.q[A])}7.q[A]=l}9(7.q.I==x.q.I){7.q.I=a u("6 \\"[1Y \\" + $3.1v(4) + \\"]\\";")}1n(f+" = 7;");9(j.$10){j.$10.2v(7)}}$3.q={C:8(){6 4.F},n:8(){6 4.1P},28:8(){6 4.G},29:8(){6 4.Q?4.Q.$3:J},2b:8(o){6 $3.1W(o,4.G)},1V:8(B){6 4.E.1R(B.C())},I:8(){6"[$3 "+4.F+"]"}};$3.1p=8(D,P){c k=a u("c m=K.1q;"+"c h=4.$M;"+"4.$M=m.e$11;"+"1u{6 m.e$W.13(4,K);}"+"2d{4.$M=h;}");k.e$W=D;k.e$11=P.e$1a||P;k.I=$3.1s;6 k};$3.1S=8(D,P){c k=a u("K.1q.e$11.13(4,K);"+(D.e$X?"":"K.1q.e$W.13(4,K);"));k.e$W=D;k.e$11=P.e$1a||P;k.I=$3.1s;9(D.e$X){k.e$1a=k.e$11}6 k};$3.1s=8(){6 N(4.e$W)};$3.1i=8(1t,l){4.1t=1t;4.l=l};$3.2f=8(1T){1u{6 1n("("+$v.1h()+"."+1T+")")}1U(1B){6 1z}};$3.1X=8(o,B){6 $3.1y(o).1V(B)};$3.1W=8(o,w){9(w y $H){6 $3.1X(o,w)}2h(2i o){T"1Y":6(o y w)||(o===J&&w==1c)||(o y R)&&(w==u);T"2j":6(w==1l);T"2k":6(w==N);T"2l":6(w==17);T"8":6(w==u)||(o y R)&&(w==R);T"1z":6(w==Z)}6 2m};$3.1v=8(o){6 $3.1y(o).C()};$3.1y=8(o){9(o==J){9(o===1z){6 Z.$3}6 1c.$3}6 o.e$3||x.$3};$3.2n=8(7,1A){9(7.$3&&7.$3.n()){6 7.13($v.1k(),1A)}1I{$v.12.q=7.q;c k=a $v.12();7.13(k,1A);6 k}};8 $H(f,j){9(4 y $H){4.F=f;4.O={};4.Y=J;4.E={};4.E[f]=4;6}9($r.U){f=$r.U.C()+"."+f}c B=a $H(f);9(j.$S!=J){c t=j.$S;9(!(t y 14)){t=[t]}L(c i=0,1g=t.15;i<1g;++i){$v.1b(B.O,t[i].O);$v.1b(B.E,t[i].E)}}L(c A 1e j){9(A=="$S"){1G}c l=j[A];9(l y $3.1i){B[A]=l.l}1I{B.O[A]=B.F}}1n(f+" = B;")}$H.q={C:8(){6 4.F},2a:8(1d){6 17(4.O[1d])},2c:8(){9(!4.Y){4.Y=[];L(c 1d 1e 4.O){4.Y.2e(1d)}}6 4.Y},I:8(){6"[$H "+4.F+"]"}};8 $2g(D){6 D}8 $10(l){6 a $3.1i("10",l)}8 $V(D){6 D}$r.$3=a $3("$r",{7:$r});$3.$3=a $3("$3",{7:$3});$H.$3=a $3("$H",{7:$H});x.$3=a $3("x",{n:d,7:x});x.e$X=d;14.$3=a $3("14",{n:d,7:14});N.$3=a $3("N",{n:d,7:N});1l.$3=a $3("1l",{n:d,7:1l});17.$3=a $3("17",{n:d,7:17});u.$3=a $3("u",{n:d,7:u});R.$3=a $3("R",{n:d,7:R,p:u});1E.$3=a $3("1E",{n:d,7:1E});z.$3=a $3("z",{n:d,7:z});1F.$3=a $3("1F",{n:d,7:1F,p:z});1H.$3=a $3("1H",{n:d,7:1H,p:z});1J.$3=a $3("1J",{n:d,7:1J,p:z});1O.$3=a $3("1O",{n:d,7:1O,p:z});1o.$3=a $3("1o",{n:d,7:1o,p:z});1r.$3=a $3("1r",{n:d,7:1r,p:z});$3("Z",{Z:$V(8(){1Z a z("20 21 22 23 Z 3.")})});$3("1c",{1c:$V(8(){1Z a z("20 21 22 23 1c 3.")})});$3("1Q",{$S:z,1Q:8(1j){4.1j=N(1j);4.f=$3.1v(4)},C:$V(8(){6 4.f}),26:$V(8(){6 4.1j}),I:$V(8(){6"[1B "+4.C()+"] "+4.26()})});',62,157,'|||class|this||return|ctor|function|if|new||var|true|_|name||||descriptor|result|value||isNative|obj|baseCtor|prototype|package||ifaces|Function|class_library|type|Object|instanceof|Error|propertyName|iface|getName|method|_interfaces|_name|_ctor|interface|toString|null|arguments|for|base|String|_methods|baseMethod|_baseCtor|RegExp|extends|case|_currentPackage|final|class_wrappedMethod|class_isTrivialCtor|_methodsArray|Undefined|static|class_baseMethod|_surrogateCtor|apply|Array|length|nextContext|Boolean|components|context|class_relevantImplementation|_copyObject|Null|methodName|in|obj1|ifacesLength|_getGlobalObjectName|_ModifiedProperty|message|_getGlobalObject|Number|_globalObjectName|eval|TypeError|_wrapExtendedMethod|callee|URIError|_wrappedMethod_toString|modifier|try|typeOf|specialProperties|constructor|getClass|undefined|args|error|_globalObject|source|Date|EvalError|continue|RangeError|else|ReferenceError|implements|ctorName|uses|test|SyntaxError|_isNative|Exception|hasOwnProperty|_wrapExtendedCtor|qualifiedName|catch|implementsInterface|instanceOf|implementationOf|object|throw|Attempted|instantiation|of|the|obj2|isTrivialCtor|getMessage|calledFrom|getConstructor|getSuperclass|hasMethod|isInstance|getMethods|finally|push|resolve|abstract|switch|typeof|number|string|boolean|false|instantiate|GLOBAL_NAMESPACE_OBJECT_NAME|self|split|slice|join|replace|bthis|call|version'.split('|'),0,{}))

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('t S={};C l(2Y){t J=l(){};J.I={x:l(c){v(A.B>1){t d=A[1];t e=q[c];v(G d=="l"&&e&&/\\5R\\b/.10(d)){t f=d;d=l(){t a=q.y;q.y=e;t b=f.T(q,A);q.y=a;u b};d.5S=f;d.2u=e}q[c]=d}H v(c){t g=J.I.x;v(J.2Z){t h=["U","25","4p"];t j,i=0;1i(j=h[i++])v(c[j]!=1U.I[j]){g.V(q,j,c[j])}}H v(G q!="l"){g=q.x||g}17(j 1J c)v(!1U.I[j]){g.V(q,j,c[j])}}u q},y:J};J.x=l(b,c){t d=J.I.x;J.2Z=18;t e=C q;d.V(e,b);2v J.2Z;t U=e.U;t f=e.U=l(){v(!J.2Z){v(q.3G||q.U==f){q.3G=18;U.T(q,A);2v q.3G}H{t a=A[0];v(a!=L){(a.x||d).V(a,e)}u a}}};17(t i 1J J)f[i]=q[i];f.2u=q;f.y=J.y;f.I=e;d.V(f,c);v(G f.O=="l")f.O();u f};J=J.x({U:l(){q.x(A[0])}},{2u:1U,y:J,1d:l(a){v(G a=="l"){a(q.I)}H{q.I.x(a)}u q}});t 26=G $26=="1q"?{}:$26;t K=l(k){u k};t 1V=l(a,b,c){v(!a){27 C(c||4q)(b||"5T 5U.");}};t 3H=l(a,b,c){v(b){t d=G b=="l"?1b(a,b):G a==b;1V(d,c||"4r 30.",4s)}};t P=l(a,b){t c=l(){u a.T(b,A)};c.3I=1K(a);u c};t 28=l(a){t b=C 1g;b.I=a;u C b};t $1b=26.1b||C 1g("o,k","u o 5V k");t $1a=Y(C 1a);t 1b=l(a,b){3H(b,"l","4r \'1b\' 5W.");v($1b(a,b))u 18;v(a!=L)29(b){W 1U:u 18;W 4t:W 4u:W Y:u G a==G b.I.4p();W 1g:u!!(G a=="l"&&a.V);W 1h:u!!(a.2w&&a.2x&&G a=="4v");W 5X:u!!a.5Y;W 1a:u Y(a.U.I)==$1a}u M};t $1W=1;t 1K=l(a){v(!a.2a)a.2a="5Z"+$1W++;u a.2a};t 4w=/%([1-9])/g;t F=l(c){t d=A;u Y(c).E(4w,l(a,b){u b<d.B?d[b]:a})};t 2y=l(a,b){u Y(a).2y(b)||[]};t 4x=/([\\/()[\\]{}|*+-.,^$?\\\\])/g;t 1L=l(a){u Y(a).E(4x,"\\\\$1")};t 3J=1h.I.X;t X=l(a){u 3J.T(a,3J.V(A,1))};t 4y=/^\\s\\s*/;t 4z=/\\s\\s*$/;t 31=l(a){u Y(a).E(4y,"").E(4z,"")};t y=l(a,b){u a.y.T(a,b)};t x=l(a){1V(a!=1U.I,"1U.I 4A 60!");u J.I.x.T(a,X(A,1))};v(G 2z=="1q"){2z=C 4q("2z")}t D=l(a,b,c){v(a==L)u;v(1b(a,1g)){t d=1g}H v(G a.D=="l"&&a.D!=A.4B){a.D(b,c);u}H v(G a.B=="3K"){D.1h(a,b,c);u}D.1g(d||1U,a,b,c)};t $D=26.D||C 1g("a,b,c","t i,d=a.B;17(i=0;i<d;i++)v(i 1J a)b.V(c,a[i],i,a)");D.1h=l(a,b,c){t i,B=a.B;v(G a=="1e"){17(i=0;i<B;i++){b.V(c,a.2A(i),i,a)}}H v(1b(a,1h)){$D(a,b,c)}H{17(i=0;i<B;i++){b.V(c,a[i],i,a)}}};D.1g=l(a,b,c,d){17(t e 1J b){v(a.I[e]===1q){c.V(d,b[e],e,b)}}};t 3L=l(){q.i=1};3L.I={i:1};t 1M=0;17(t 61 1J C 3L)1M++;v(1M>1){D.1g=l(a,b,c,d){t e={};17(t f 1J b){v(!e[f]&&a.I[f]===1q){e[f]=18;c.V(d,b[f],f,b)}}}}J.D=l(a,b,c){D.1g(q,a,b,c)};1g.I.I={};v("".E(/^/,Y)){t 4C=/(g|4D)$/;x(Y.I,"E",l(a,b){v(G b=="l"){v(1b(a,1a)){t c=a;t d=c.32;v(d==L)d=4C.10(c);v(d)c=C 1a(c.33)}H{c=C 1a(1L(a))}t e,1e=q,3M="";1i(1e&&(e=c.1j(1e))){3M+=1e.X(0,e.N)+b.T(q,e);1e=1e.X(e.N+e[0].B);v(!d)3N}u 3M+1e}u q.y(a,b)})}t 3O=J.x({U:l(){27 C 4s("62 63 64 65.");}});t 1t=3O.x(L,{x:l(c,d){t e=q.y();D(q,l(a,b){v(!1t[b]&&b!="O"){x(e,b,a)}});e.1d(c);x(e,d);v(G e.O=="l")e.O();u e},1d:l(c){t d=q;v(G c=="l"){d.y(c);D(c,l(a,b){v(!1t[b]&&b!="O"){x(d,b,a)}})}H{J.D(x({},c),l(a,b){v(G a=="l"){a=l(){y;u d[b].T(d,[q].2b(X(A)))}}v(!1t[b])x(q,b,a)},d.I);x(d,c)}u d}});t 2c=1t.x({4E:l(c,d,e){t f=18;2B{D(c,l(a,b){f=d.V(e,a,b,c);v(!f)27 2z;})}2C(2d){v(2d!=2z)27 2d;}u!!f},66:l(d,e,f){u q.2D(d,l(a,b,c){v(e.V(f,b,c,d)){a[a.B]=b}u a},C 1r)},68:l(b,c){t d=X(A,2);u q.2E(b,(G c=="l")?l(a){v(a!=L)u c.T(a,d)}:l(a){v(a!=L)u a[c].T(a,d)})},2E:l(c,d,e){t f=C 1r;D(c,l(a,b){f[f.B]=d.V(e,a,b,c)});u f},69:l(b,c){u q.2E(b,l(a){v(a!=L)u a[c]})},2D:l(c,d,e,f){D(c,l(a,b){e=d.V(f,e,a,b,c)});u e},6a:l(c,d,e){u!q.4E(c,l(a,b){u!d.V(e,a,b,c)})}});t 1s=1t.x({4F:l(d,e){v(!e)e=d;u q.2D(d,l(a,b,c){a[b]=e[c];u a},{})},28:l(a){u q.2b(a)},1c:l(a,b){u q.1X(a,b)!=-1},D:D.1h,1X:l(a,b,c){t d=a.B;v(c==L){c=0}H v(c<0){c=4G.4H(0,d+c)}17(t i=c;i<d;i++){v(a[i]===b)u i}u-1},3P:l(a,b,c){q.2x(a,c,0,b);u b},6b:l(a,b,c){t d=q.1X(a,c);v(d==-1)q.2e(a,b);H q.2x(a,d,0,b);u b},1k:l(a,b){v(b<0)b+=a.B;u a[b]},6c:l(a,b,c){t d=a.B;v(c==L){c=d-1}H v(6d<0){c=4G.4H(0,d+c)}17(t i=c;i>=0;i--){v(a[i]===b)u i}u-1},2F:l(a,b){t c=q.1X(a,b);v(c!=-1)q.3Q(a,c);u b},3Q:l(a,b){u q.2x(a,b,1)}});1s.I.D=l(a,b){D.1h(q,a,b)};1s.1d(2c);D("2b,2w,6e,2e,3R,6f,X,34,2x,6g".1C(","),l(b){t c=1h.I[b];1s[b]=l(a){u c.T(a,X(A,1))}});t 1r=l(){u 1s(q.U==1s?1h.T(L,A):A[0])};1r.I=1s.I;D(1s,l(a,b){v(1h[b]){1s[b]=1h[b];2v 1s.I[b]}1r[b]=1s[b]});t 1N="#";t 19=1N+"4I";t 1Y=1N+"1Z";t 35=J.x({U:l(a){q[19]=C 1r;q[1Y]={};q.3S(a)},28:l(){t c=C q.U(q);J.D(q,l(a,b){v(G a!="l"&&b.2A(0)!="#"){c[b]=a}});u c},2f:26.2f||C 1g("k",F("u(\'%1\'+k)1J q[\'%2\']",1N,1Y)),20:l(a){u q[1Y][1N+a]},D:l(b,c){D(q[19],l(a){b.V(c,q.20(a),a,q)},q)},4I:l(a,b){t c=q[19]||C 1r;29(A.B){W 0:u c.28();W 1:u c.1k(a);36:u c.X(a,b)}},3S:l(d){D(A,l(c){D(c,l(a,b){q.21(b,a)},q)},q);u q},2F:l(a){t b=q.20(a);q[19].2F(Y(a));2v q[1Y][1N+a];u b},21:l(a,b){v(A.B==1)b=a;v(!q.2f(a)){q[19].2e(Y(a))}q[1Y][1N+a]=b;u b},25:l(){u Y(q[19])},6h:l(a){u q.3S.T(q.28(),A)},1Z:l(a,b){t c=q.2E(K);29(A.B){W 0:u c;W 1:u c.1k(a);36:u c.X(a,b)}}});35.1d(2c);t 3T=35.x({37:l(a,b){1V(!q.2f(a),"4J 4K \'"+a+"\'.");u q.21.T(q,A)},1M:l(){u q[19].B},1X:l(a){u q[19].1X(Y(a))},3P:l(a,b,c){1V(!q.2f(b),"4J 4K \'"+b+"\'.");q[19].3P(a,Y(b));u q.21.T(q,X(A,1))},1k:l(a){u q.20(q[19].1k(a))},3Q:l(a){u q.2F(q[19].1k(a))},3R:l(){q[19].3R();u q},34:l(c){v(c){t d=q;q[19].34(l(a,b){u c(d.20(a),d.20(b),a,b)})}H q[19].34();u q},21:l(a,b){v(A.B==1)b=a;b=q.U.38.T(q.U,A);u q.y(a,b)},4L:l(a,b){1V(a<q.1M(),"6i 6j 6k 6l.");A[0]=q[19].1k(a);u q.21.T(q,A)}},{1l:L,38:l(a,b){v(q.1l&&!1b(b,q.1l)){b=C q.1l(a,b)}u b},x:l(a,b){t c=q.y(a);c.38=q.38;x(c,b);v(!c.1l){c.1l=q.1l}H v(G c.1l!="l"){c.1l=(q.1l||J).x(c.1l)}v(G c.O=="l")c.O();u c}});t 2g=3T.x({U:l(a,b){q.y(a);v(G b=="1e"){q.32=/g/.10(b);q.39=/i/.10(b)}},32:18,39:M,1j:l(d,e){v(A.B==1){t f=q;t g=q[19];t h=q[1Y];e=l(a){v(!a)u"";t b=1,i=0;1i(a=h[1N+g[i++]]){v(A[b]){t c=a.3U;29(G c){W"l":u c.T(f,X(A,b));W"3K":u A[b+c];36:u c}}H b+=a.B+1}}}t j=(q.32?"g":"")+(q.39?"i":"");u Y(d).E(C 1a(q,j),e)},10:l(a){u q.1j(a)!=a},25:l(){t e=/\\\\(\\d+)/g;t f=0;u"("+q.2E(l(c){t d=Y(c).E(e,l(a,b){u"\\\\"+(1+4t(b)+f)});f+=c.B+1;u d}).2w(")|(")+")"}},{4M:"$0",O:l(){D("37,2f,20,2F,21".1C(","),l(b){x(q,b,l(a){v(1b(a,1a)){a=a.33}u y(q,A)})},q.I)}});2g.1l=J.x({U:l(a,b){t c=/\\\\./g;t d=/([\'"])\\1\\+(.*)\\+\\1\\1$/;2B{t e=C 1a("\\\\((?!\\\\?)","g")}2C(6m){e=/\\(/g}a=1b(a,1a)?a.33:Y(a);v(G b=="3K")b=Y(b);H v(b==L)b="";q.B=2y(a.E(c,"").E(/\\[[^\\]]+\\]/g,""),e).B;v(G b=="1e"&&/\\$(\\d+)/.10(b)){v(/^\\$\\d+$/.10(b)){b=3V(b.X(1))}H{t i=q.B+1;t Q=/\'/.10(b.E(c,""))?\'"\':"\'";b=b.E(/\\n/g,"\\\\n").E(/\\r/g,"\\\\r").E(/\\$(\\d+)/g,Q+"+(A[$1]||"+Q+Q+")+"+Q);b=C 1g("u "+Q+b.E(d,"$1")+Q)}}q.3U=b;q.25=l(){u a||""}},B:0,3U:""});t 2G=J.x({U:l(c,d){q.x(d);v(G q.O=="l")q.O();v(q.1m!="S"){q.1O=F("t %1=S.%1;",q.1m)}t e="t y="+y+";";t f=("S,"+q.2h).1C(",");c.2h=1r.2D(f,l(a,b){v(S[b])a+=S[b].1O;u a},e);t e=F("S.%1=%1;",q.1m);t g=q.1u.1C(",");c.1u=1r.2D(g,l(a,b){v(b){q.1O+=F("t %2=%1.%2;",q.1m,b);a+=F("v(!%1.%2)%1.%2=%2;",q.1m,b)}u a},e,q);v(q.1m!="S"){S.1O+=F("t %1=S.%1;",q.1m)}},1u:"",2h:"",1O:"",1m:"",3a:l(a,b){q[a]=b;q.1u+=","+a;q.1O+=F("t %1=%2.%1;",a,q.1m)}});S=C 2G(q,{1m:"S",3W:"0.9 (4N)",1u:"J,3O,1t,2c,1r,35,3T,2g,2G,"+"K,1V,3H,1K,P,28,x,F,D,1b,2y,1L,X,31"});D(2c,l(a,b){v(!1t[b])S.3a(b,a)});S.x=x;1P(q.1u)};C l(2Y){t 1n=11.4O("6n");t 6o/*@4P=@6p@*/;t 1v=C S.2G(q,{1m:"1v",3W:"0.9",1u:"1Q",3b:"",O:l(){t a/*@4P=18@*/;t b=4Q.3b;v(!a)b=b.E(/12\\s[\\d.]+/,"");b=b.E(/([a-z])[\\s\\/](\\d)/4D,"$1$2");q.3b=4Q.4R+" "+b},1Q:l(a){t r=M;t b=a.2A(0)=="!";a=a.E(/^\\!?(v\\s*|4R\\s+)?/,"").E(/^(["\']?)([^\\(].*)(\\1)$/,"/($2)/i.10(1v.3b)");2B{1P("r=!!"+a)}2C(2d){}u 4u(b^r)}});1P(q.2h);t 3X=J.I.x;J.I.x=l(a,b){v(G a=="1e"&&a.2A(0)=="@"){u 1v.1Q(a.X(1))?3X.V(q,b):q}u 3X.T(q,A)};v(1v.1Q("12[56].+2H")&&!1v.1Q("6q")){t $1R={};x(S,"P",l(b,c){v(!c||c.1w!=1){u q.y(b,c)}t d=c.6r;t e=1K(b);$1R[e]=b;c=L;b=L;v(!$1R[d])$1R[d]={};t f=$1R[d][e];v(f)u f;t g=l(){t a=11.1D[d];v(a)u $1R[e].T(a,A)};g.3I=e;$1R[d][e]=g;u g});3Y("6s",l(){$1R=L})}1P(q.1u)};C l(2Y){t 2I=C S.2G(q,{1m:"2I",3W:"0.9 (4N)",2h:"1v",1u:"2J,1E,1F,R,3c,2i,1S,3d,13,2K,3Z,3e,40,41,2L,2j"});1P(q.2h);t 2k=1t.x(L,{2M:l(b){q[b]=l(a){t m=(a.y&&a.y==a[b].2u)?"y":b;u a[m].T(a,X(A,1))}},x:l(c,d){t e=q.y();D(c,l(a,b){v(G a=="l"&&!e[b]){e.2M(b)}H v(b.2A(0)=="@"){D(a,A.4B)}});e.1d(c);x(e,d);v(G e.O=="l")e.O();u e},"@!(1n.1x.T)":{2M:l(c){q[c]=l(a){t m=(a.y&&a.y==a[c].2u)?"y":c;29(A.B){W 1:u a[m]();W 2:u a[m](A[1]);W 3:u a[m](A[1],A[2]);W 4:u a[m](A[1],A[2],A[3])}t b=[],i=A.B;1i(i-->1)b[i-1]="A["+i+"]";1P("t 2N=4v[m]("+b+")");u 2N}}}});t 3f=2k.x(L,{P:l(a){u q(a)}});t R=1t.x({3g:l(a){u q.2l(a).3h},3i:l(a){1i(a&&(a=a.3j)&&!q.2O(a))42;u a},4S:l(a){t b=0;1i(a&&(a=a.4T))b++;u b},2m:l(a){u a.3k},43:l(a){1i(a&&(a=a.4T)&&!q.2O(a))42;u a},4U:l(a){u a[R.$3l]},4V:l(a){a=a.4W;1i(a){v(a.1w==3||q.2O(a))u M;a=a.3j}u 18},6t:l(a,b){u a[R.$3l]=b},"@12":{3g:l(a){u q.2l(a).6u},"@1G":{2m:l(a){u a.3k||a.11}}}},{$3l:"6v",1c:l(a,b){1i(b&&(b=b.2P)&&a!=b)42;u!!b},2l:l(a){u q.44(a)?a:q.2m(a)},44:l(a){u!!(a&&a.45)},2O:l(a){u!!(a&&a.1w==1)},"@(1n.1c)":{1c:l(a,b){u a!=b&&q.44(a)?a==q.2m(b):a.1c(b)}},"@12":{$3l:"6w"},"@1G":{2O:l(a){u!!(a&&a.1w==1&&a.22!="!")}}});t 2J=3f.x({"@!(1n.4X)":{4X:l(a,b){v(R.1c(a,b)){u 4|16}H v(R.1c(b,a)){u 2|8}t c=q.$3m(a);t d=q.$3m(b);v(c<d){u 4}H v(c>d){u 2}u 0}}},{$3m:l(a){t b=0;1i(a){b=R.4S(a)+"."+b;a=a.2P}u b},"@(1n.3n)":{$3m:l(a){u a.3n}}});t 1E=2J.x(L,{P:l(a){q.y(a);3c.P(a.3h);u a}});1E.2M("4O");t 1F=2J.x({"@12[67]":{3o:l(a,b){v(a.1y===1q||b=="4Y"||b=="46"){u q.y(a,b,2)}t c=a.6x(b);u c&&c.4Z?c.50:L}},"@1G.+2H":{3o:l(a,b){v(a.1y===1q||b=="4Y"||b=="46"){u q.y(a,b,2)}t c=a.3p[q.$23[b.51()]||b];u c?c.4Z?c.50:L:q.y(a,b)}}},{$23:"",O:l(){t a=q.$23.51().1C(",");t b=q.$23.1C(",");q.$23=1r.4F(a,b)},"@1G.+2H":{$23:"6y,6z,6A,6B,6C,6D,6E,6F,6G,6H"}});1F.2M("52");x(2I,{P:l(a){v(a)29(a.1w){W 1q:u a;W 1:u 1F.P(a);W 9:u 1E.P(a);36:u 2J.P(a)}}});t 47={};t 48=l(a){v(a){t b=1K(a);v(!47[b]){2I.P(a);47[b]=18}}u a};t 3c=3f.x();t 2i=3f.x({"@!(11.2o)":{49:l(a,b,c,d){a.30=b;a.53=c;a.4a=d},"@12":{49:l(a){y(q,A);a.54=!a.53},55:l(a){v(a.4a!==M){a.2N=M}},6I:l(a){a.54=18}}}},{"@12":{"@6J":{P:l(a){u q.y(x({55:l(){v(q.4a!==M){q.2N=M}}},a))}},"@6K":{P:l(a){q.y(a);v(!a.3q){a.3q=a.6L}u a}}}});t 1S=2k.x({"@!(1n.1x)":{1x:l(a,b,c,d){t e=1K(a);t f=c.3I||1K(c);t g=q.$1D[e];v(!g)g=q.$1D[e]={};t h=g[b];t i=a["57"+b];v(!h){h=g[b]={};v(i)h[0]=i}h[f]=c;v(i!==1q){a["57"+b]=q.$3r}},4b:l(a,b){q.$3r.V(a,b)},6M:l(a,b,c,d){t e=q.$1D[a.2a];v(e&&e[b]){2v e[b][c.2a]}},"@12.+2H":{1x:l(a,b,c,d){v(G c=="l"){c=P(c,a)}q.y(a,b,c,d)},4b:l(a,b){b.3q=a;2B{a.6N(b.30,b)}2C(2d){q.y(a,b)}}}}},{"@!(1n.1x)":{$1D:{},$3r:l(a){t b=18;t c=1S.$1D[q.2a];v(c){a=2i.P(a);t d=c[a.30];17(t i 1J d){t e=d[i];v(e.58){b=e.58(a)}H{b=e.V(q,a)}v(a.2N===M)b=M;v(b===M)3N}}u b},"@12":{$3r:l(a){v(!a){a=(q.6O?59:R.3g(q)).6P}u q.y(a)}}}});t 3d=2k.x({"@!(11.2o)":{2o:l(a){u 2i.P({})},"@(11.5a)":{2o:l(a){u 2i.P(a.5a())}}},"@3s":{2o:l(a,b){u q.y(a,b=="5b"?"6Q":b)}}});t 1o=C J({3t:M,2p:l(){v(!1o.3t){1o.3t=18;6R(l(){t a=3d.2o(11,"5b");2i.49(a,"1o",M,M);1S.4b(11,a)},0)}},O:l(){1S.1x(11,"1o",l(){1o.3t=18},M);1S.1x(59,"5c",1o.2p,M)},"@(1x)":{O:l(){q.y();1x("5c",1o.2p,M)}},"@(3Y)":{O:l(){q.y();3Y("6S",1o.2p)}},"@12.+2H":{O:l(){q.y();11.6T("<5d 1W=5e 6U 46=//:><\\/5d>");11.1D.5e.6V=l(){v(q.5f=="5g"){q.6W();1o.2p()}}}},"@3s":{O:l(){q.y();t a=6X(l(){v(/6Y|5g/.10(11.5f)){6Z(a);1o.2p()}},71)}}});1o.O();t 40=2k.x({"@!(5h)":{5h:l(a,b){u b.72}}},{73:l(c){u Y(c).E(/\\-([a-z])/g,l(a,b){u b.4c()})}});x(1E,{"@!(11.3h)":{P:l(a){a.3h=R.3g(a);q.y(a);u a}}});t 3u=2k.x({"@!(1n.5i)":{5i:l(a,b){v(1b(b,1h)){b=b.2w(".")}u q.3v(a,"."+b)}},"@!(1n.3w)":{3v:l(a,b){u C 13(b).1j(a)},3w:l(a,b){u C 13(b).1j(a,1)}}});x(3u.I,{3v:l(b){u x(q.y(b),"1k",l(a){u 48(q.y(a))})},3w:l(a){u 48(q.y(a))}});t 2K=3u.x();t 3Z=3u.x({"@!(1n.5j)":{5j:l(a,b){u C 13(b).10(a)}}});t 3e=J.x({U:l(b){b=b||[];q.B=b.B;q.1k=l(a){u b[a]}},B:0,D:l(a,b){t c=q.B;17(t i=0;i<c;i++){a.V(b,q.1k(i),i,q)}},1k:l(a){},"@(5k)":{U:l(b){v(b&&b.5l){q.B=b.74;q.1k=l(a){u b.5l(a)}}H q.y(b)}}});3e.1d(2c);t 13=J.x({U:l(a){q.25=l(){u 31(a)}},1j:l(a,b){2B{t c=q.$2Q(a||11,b)}2C(2d){27 C 75(F("\'%1\' 4A 1f a 76 77 78.",q));}u b?c:C 3e(c)},10:l(a){a.52("4d",18);t b=C 13(q+"[4d]");t c=b.1j(R.2m(a),18);a.79("4d");u c==a},$2Q:l(a,b){u 13.3x(q)(a,b)}});t 1z=2g.x({U:l(){y(q,A);q.1T={};q.2R=C 2g;q.2R.37(/:1f\\([^)]*\\)/,2g.4M);q.2R.37(/([ >](\\*|[\\w-]+))([^: >+~]*)(:\\w+-Z(\\([^)]+\\))?)([^: >+~]*)/,"$1$3$6$4")},1T:L,39:18,3y:l(b){t c=/\'/g;t d=q.5m=[];u q.5n(q.F(Y(b).E(1z.5o,l(a){d.2e(a.X(1,-1).E(c,"\\\\\'"));u"\\5p"+d.B})))},F:l(a){u a.E(1z.5q,"$1").E(1z.5r,"$1 $2").E(1z.5s,"$1*$2")},5n:l(a){u q.2R.1j(a.E(1z.5t,">* "))},3x:l(a){u q.1T[a]||(q.1T[a]=q.2q(q.1j(q.3y(a))))},2q:l(c){t d=q.5m;u c.E(/\\5p(\\d+)/g,l(a,b){u d[b-1]})}},{5o:/(["\'])[^\\1]*\\1/g,5s:/([\\s>+~,]|[^(]\\+|^)([#.:@])/g,5r:/(^|,)([^\\s>+~])/g,5q:/\\s*([\\s>+~(),]|^|$)\\s*/g,5t:/\\s\\*\\s/g,24:l(c,d,e,f,g,h,i,j){f=/1p/i.10(c)?f+"+1-":"";v(!7a(d))d="7b+"+d;H v(d=="7c")d="2n";H v(d=="7d")d="2n+1";d=d.1C(/n\\+?/);t a=d[0]?(d[0]=="-")?-1:3V(d[0]):1;t b=3V(d[1])||0;t g=a<0;v(g){a=-a;v(a==1)b++}t k=F(a==0?"%3%7"+(f+b):"(%4%3-%2)%6%1%70%5%4%3>=%2",a,b,e,f,h,i,j);v(g)k=g+"("+k+")";u k}});13.4e={"=":"%1==\'%2\'","!=":"%1!=\'%2\'","~=":/(^| )%1( |$)/,"|=":/^%1(-|$)/,"^=":/^%1/,"$=":/%1$/,"*=":/%1/};13.4e[""]="%1!=L";13.1A={"4f":"e%1.4f","1c":"R.4U(e%1).1X(\'%2\')!=-1","3z":"e%1.3z","5u":"R.4V(e%1)","5v":"e%1.3z===M","4g-Z":"!R.43(e%1)","1p-Z":"!R.3i(e%1)","2S-Z":"!R.43(e%1)&&!R.3i(e%1)","4h":"e%1==R.2l(e%1).45"};C l(2Y){t 12=1v.1Q("12");t 1G=1v.1Q("1G");t 5w=1v.1Q("(1n.3n)");t 4i="t p%2=0,i%2,e%2,n%2=e%1.";t 5x=5w?"e%1.3n":"1K(e%1)";t 5y="t g="+5x+";v(!p[g]){p[g]=1;";t 5z="r[r.B]=e%1;v(s)u e%1;";t 5A="2r=l(5B,s){2s++;t r=[],p={},1B=[%1],"+"d=R.2l(5B),c=d.5C?\'4c\':\'25\';";t 4j=12?l(a,b){t c=a.1D[b]||L;v(!c||c.1W==b)u c;17(t i=0;i<c.B;i++){v(c[i].1W==b)u c[i]}u L}:l(a,b){u a.4j(b)};t 2s=1;l 5D(a){v(a.5E!=2s){t b=0;t c=a.4W;1i(c){v(c.1w==1&&c.22!="!"){c.5F=++b}c=c.3j}a.5G=b;a.5E=2s}u a};t 2r;t N;t 1B;t 15;t 1H;t 2T;t 1T={};t 2t=C 1z({"^ \\\\*:4h":l(a){15=M;t b="e%2=d.45;v(R.1c(e%1,e%2)){";u F(b,N++,N)}," (\\\\*|[\\\\w-]+)#([\\\\w-]+)":l(a,b,c){15=M;t d="t e%2=4j(d,\'%4\');v(e%2&&";v(b!="*")d+="e%2.2U==\'%3\'[c]()&&";d+="R.1c(e%1,e%2)){";v(1H)d+=F("i%1=n%1.B;",1H);u F(d,N++,N,b,c)}," (\\\\*|[\\\\w-]+)":l(a,b){2T++;15=b=="*";t c=4i;c+=(15&&1G)?"1D":"7e(\'%3\')";c+=";17(i%2=0;(e%2=n%2[i%2]);i%2++){";u F(c,N++,1H=N,b)},">(\\\\*|[\\\\w-]+)":l(a,b){t c=12&&1H;15=b=="*";t d=4i;d+=c?"7f":"7g";v(!15&&c)d+=".4k(\'%3\')";d+=";17(i%2=0;(e%2=n%2[i%2]);i%2++){";v(15){d+="v(e%2.1w==1){";15=1G}H{v(!c)d+="v(e%2.2U==\'%3\'[c]()){"}u F(d,N++,1H=N,b)},"\\\\+(\\\\*|[\\\\w-]+)":l(a,b){t c="";v(15&&12)c+="v(e%1.22!=\'!\'){";15=M;c+="e%1=R.3i(e%1);v(e%1";v(b!="*")c+="&&e%1.2U==\'%2\'[c]()";c+="){";u F(c,N,b)},"~(\\\\*|[\\\\w-]+)":l(a,b){t c="";v(15&&12)c+="v(e%1.22!=\'!\'){";15=M;2T=2;c+="1i(e%1=e%1.3j){v(e%1.5H==2s)3N;e%1.5H=2s;v(";v(b=="*"){c+="e%1.1w==1";v(1G)c+="&&e%1.22!=\'!\'"}H c+="e%1.2U==\'%2\'[c]()";c+="){";u F(c,N,b)},"#([\\\\w-]+)":l(a,b){15=M;t c="v(e%1.1W==\'%2\'){";v(1H)c+=F("i%1=n%1.B;",1H);u F(c,N,b)},"\\\\.([\\\\w-]+)":l(a,b){15=M;1B.2e(C 1a("(^|\\\\s)"+1L(b)+"(\\\\s|$)"));u F("v(1B[%2].10(e%1.1y)){",N,1B.B-1)},":1f\\\\((\\\\*|[\\\\w-]+)?([^)]*)\\\\)":l(a,b,c){t d=(b&&b!="*")?F("v(e%1.2U==\'%2\'[c]()){",N,b):"";d+=2t.1j(c);u"v(!"+d.X(2,-1).E(/\\)\\{v\\(/g,"&&")+"){"},":3A(-1p)?-Z\\\\(([^)]+)\\\\)":l(a,b,c){15=M;b=F("e%1.2P.5G",N);t d="v(p%1!==e%1.2P)";d+="p%1=5D(e%1.2P);t i=e%1.5F;v(";u F(d,N)+1z.24(a,c,"i",b,"!","&&","%","==")+"){"},":([\\\\w-]+)(\\\\(([^)]+)\\\\))?":l(a,b,c,d){u"v("+F(13.1A[b],N,d||"")+"){"},"\\\\[([\\\\w-]+)\\\\s*([^=]?=)?\\\\s*([^\\\\]]*)\\\\]":l(a,b,c,d){t e=1F.$23[b]||b;v(b=="5I")e="1y";H v(b=="17")e="7h";v(c){b=F("(e%1.%3||e%1.3o(\'%2\'))",N,b,e)}H{b=F("1F.3o(e%1,\'%2\')",N,b)}t f=13.4e[c||""];v(1b(f,1a)){1B.2e(C 1a(F(f.33,1L(2t.2q(d)))));f="1B[%2].10(%1)";d=1B.B-1}u"v("+F(f,b,d)+"){"}});13.3x=l(a){v(!1T[a]){1B=[];2r="";t b=2t.3y(a).1C(",");17(t i=0;i<b.B;i++){15=N=1H=0;2T=b.B>1?2:0;t c=2t.1j(b[i])||"27;";v(15&&12){c+=F("v(e%1.22!=\'!\'){",N)}t d=(2T>1)?5y:"";c+=F(d+5z,N);c+=1h(2y(c,/\\{/g).B+1).2w("}");2r+=c}1P(F(5A,1B)+2t.2q(2r)+"u s?L:r}");1T[a]=2r}u 1T[a]}};t 2j=1z.x({U:l(){q.y(2j.4l);q.2R.4L(1,"$1$4$3$6")},3y:l(a){u q.y(a).E(/,/g,"\\4m")},2q:l(a){u q.y(a.E(/\\[2V::\\*\\]/g,"").E(/\\4m/g," | "))},"@5J":{2q:l(a){u q.y(a.E(/1p\\(\\)/g,"1M(3B-1I::*)+1M(2W-1I::*)+1"))}}},{O:l(){q.1Z.3p[""]="[@$1]";D(q.5K,l(a,b){D(q.1Z[b],a,q.4l)},q)},3C:{1A:{"4g-Z":"[1]","1p-Z":"[1p()]","2S-Z":"[1p()=1]"}},4l:x({},{"@!3s":{"(^|\\\\4m) (\\\\*|[\\\\w-]+)#([\\\\w-]+)":"$7i(\'$3\')[2V::$2]","([ >])(\\\\*|[\\\\w-]+):([\\\\w-]+-Z(\\\\(([^)]+)\\\\))?)":l(a,b,c,d,e,f){t g=(b==" ")?"//*":"/*";v(/^3A/i.10(d)){g+=24(d,f,"7j()")}H{g+=2j.3C.1A[d]}u g+"[2V::"+c+"]"}}}),5K:{5L:l(a,b){q[1L(b)+"([\\\\w-]+)"]=a},5M:l(a,b){q[1L(b)+"(\\\\*|[\\\\w-]+)"]=a},3p:l(a,b){q["\\\\[([\\\\w-]+)\\\\s*"+1L(b)+"\\\\s*([^\\\\]]*)\\\\]"]=a},1A:l(a,b){q[":"+b.E(/\\(\\)$/,"\\\\(([^)]+)\\\\)")]=a}},1Z:{5L:{"#":"[@1W=\'$1\'][1]",".":"[1c(2b(\' \',@5I,\' \'),\' $1 \')]"},5M:{" ":"/7k::$1",">":"/Z::$1","+":"/2W-1I::*[1][2V::$1]","~":"/2W-1I::$1"},3p:{"*=":"[1c(@$1,\'$2\')]","^=":"[7l-5N(@$1,\'$2\')]","$=":"[7m(@$1,1e-B(@$1)-1e-B(\'$2\')+1)=\'$2\']","~=":"[1c(2b(\' \',@$1,\' \'),\' $2 \')]","|=":"[1c(2b(\'-\',@$1,\'-\'),\'-$2-\')]","!=":"[1f(@$1=\'$2\')]","=":"[@$1=\'$2\']"},1A:{"5u":"[1f(Z::*) 3D 1f(7n())]","4g-Z":"[1f(3B-1I::*)]","1p-Z":"[1f(2W-1I::*)]","1f()":5O,"3A-Z()":24,"3A-1p-Z()":24,"2S-Z":"[1f(3B-1I::*) 3D 1f(2W-1I::*)]","4h":"[1f(7o::*)]"}},"@5J":{O:l(){q.3C.1A["1p-Z"]=q.1Z.1A["1p-Z"];q.3C.1A["2S-Z"]=q.1Z.1A["2S-Z"];q.y()}}});l 5O(a,b){t c=C 2j;u"[1f("+c.1j(31(b)).E(/\\[1\\]/g,"").E(/^(\\*|[\\w-]+)/,"[2V::$1]").E(/\\]\\[/g," 3D ").X(1,-1)+")]"};l 24(a,b,c){u"["+1z.24(a,b,c||"1M(3B-1I::*)+1","1p()","1f"," 3D "," 7p ","=")+"]"};13.1d({2X:l(){u 13.2X(q)},"@(5k)":{$2Q:l(a,b){v(13.$3E.10(q)){u y(q,A)}t c=R.2l(a);t d=b?9:7;t e=c.2Q(q.2X(),a,L,d,L);u b?e.7q:e}},"@12":{$2Q:l(a,b){v(G a.5P!="1q"&&!13.$3E.10(q)){t c=b?"7r":"5P";u a[c](q.2X())}u y(q,A)}}});x(13,{3F:L,2X:l(a){v(!q.3F)q.3F=C 2j;u q.3F.3x(a)},$3E:/:(4f|3z|5v|1c)|^(#[\\w-]+\\s*)?\\w+$/,"@3s":{"@!7s":{$3E:/./}}});S.3a("$",l(a,b){u 2K.3w(b||11,a)});S.3a("$$",l(a,b){u 2K.3v(b||11,a)});v(F("%1","$$")=="$"){5N(S)1O=1O.X(0,-14)+"t $$=S.$$;"}S.$("7t");3c.1d(40);1E.1d(2K);1E.1d(3d);1E.1d(1S);1F.1d(3Z);1F.1d(1S);t 41=1E.x({"@!(11.1w)":{1w:9}},{"@(11.4n===1q)":{P:l(b){q.y(b);b.4n=L;b.1x("7u",l(a){b.4n=a.3q},M);u b}}});t 2L=1F.x({7v:l(a,b){v(!q.5Q(a,b)){a.1y+=(a.1y?" ":"")+b;u b}},5Q:l(a,b){t c=C 1a("(^|\\\\s)"+b+"(\\\\s|$)");u c.10(a.1y)},7w:l(a,b){t c=C 1a("(^|\\\\s)"+b+"(\\\\s|$)");a.1y=a.1y.E(c,"$2");u b}},{4o:{},4k:"*",x:l(){t b=y(q,A);t c=(b.4k||"").4c().1C(",");D(c,l(a){2L.4o[a]=b});u b},"@!(1n.3k)":{P:l(a){q.y(a);a.3k=R.2m(a);u a}}});x(2I,"P",l(a){v(G a.1y=="1e"){(2L.4o[a.22]||2L).P(a)}H v(a.5C!==1q){41.P(a)}H{q.y(a)}u a});1P(q.1u)};',62,467,'|||||||||||||||||||||function|||||this|||var|return|if||extend|base||arguments|length|new|forEach|replace|format|typeof|else|prototype|Base||null|false|index|init|bind||Traversal|base2|apply|constructor|call|case|slice|String|child|test|document|MSIE|Selector||wild||for|true|KEYS|RegExp|instanceOf|contains|implement|string|not|Function|Array|while|exec|item|Item|name|element|DOMContentLoaded|last|undefined|Array2|IArray|Module|exports|BOM|nodeType|addEventListener|className|Parser|pseudoClasses|reg|split|all|Document|Element|MSIE5|list|sibling|in|assignID|rescape|count|HASH|namespace|eval|detect|closures|EventTarget|cache|Object|assert|id|indexOf|VALUES|values|fetch|store|tagName|htmlAttributes|_nthChild|toString|Legacy|throw|copy|switch|base2ID|concat|Enumerable|error|push|exists|RegGrp|imports|Event|XPathParser|Interface|getDocument|getOwnerDocument||createEvent|fire|unescape|fn|indexed|parser|ancestor|delete|join|splice|match|StopIteration|charAt|try|catch|reduce|map|remove|Namespace|win|DOM|Node|DocumentSelector|HTMLElement|createDelegate|returnValue|isElement|parentNode|evaluate|sorter|only|dup|nodeName|self|following|toXPath|_|_prototyping|type|trim|global|source|sort|Hash|default|add|create|ignoreCase|addName|userAgent|AbstractView|DocumentEvent|StaticNodeList|Binding|getDefaultView|defaultView|getNextElementSibling|nextSibling|ownerDocument|TEXT|getSourceIndex|sourceIndex|getAttribute|attributes|target|dispatch|KHTML|fired|NodeSelector|matchAll|matchSingle|parse|escape|disabled|nth|preceding|optimised|and|NOT_XPATH|xpathParser|_constructing|assertType|cloneID|SLICE|number|Temp|result|break|Abstract|insertAt|removeAt|reverse|merge|Collection|replacement|parseInt|version|_extend|attachEvent|ElementSelector|ViewCSS|HTMLDocument|continue|getPreviousElementSibling|isDocument|documentElement|src|_bound|_bind|initEvent|cancelable|dispatchEvent|toUpperCase|b2_test|operators|checked|first|root|VAR|getElementById|tags|rules|x02|activeElement|bindings|valueOf|Error|Invalid|TypeError|Number|Boolean|object|FORMAT|RESCAPE|LTRIM|RTRIM|is|callee|GLOBAL|gi|every|combine|Math|max|keys|Duplicate|key|storeAt|IGNORE|alpha|createElement|cc_on|navigator|platform|getNodeIndex|previousSibling|getTextContent|isEmpty|firstChild|compareDocumentPosition|href|specified|nodeValue|toLowerCase|setAttribute|bubbles|cancelBubble|preventDefault||on|handleEvent|window|createEventObject|Events|load|script|__ready|readyState|complete|getComputedStyle|getElementsByClassName|matchesSelector|XPathResult|snapshotItem|_strings|optimise|ESCAPE|x01|WHITESPACE|IMPLIED_SPACE|IMPLIED_ASTERISK|WILD_CARD|empty|enabled|INDEXED|ID|TEST|STORE|FN|e0|body|register|b2_indexed|b2_index|b2_length|b2_adjacent|class|opera|types|identifiers|combinators|with|_not|selectNodes|hasClass|bbase|method|Assertion|failed|instanceof|operand|Date|getTimezoneOffset|b2_|verboten|property|Class|cannot|be|instantiated|filter||invoke|pluck|some|insertBefore|lastIndexOf|from|pop|shift|unshift|union|Index|out|of|bounds|ignore|span|jscript|_jscript_version|SV1|uniqueID|onunload|setTextContent|parentWindow|textContent|innerText|getAttributeNode|colSpan|rowSpan|vAlign|dateTime|accessKey|tabIndex|encType|maxLength|readOnly|longDesc|stopPropagation|Mac|Windows|srcElement|removeEventListener|fireEvent|Infinity|event|UIEvents|setTimeout|onload|write|defer|onreadystatechange|removeNode|setInterval|loaded|clearInterval||100|currentStyle|toCamelCase|snapshotLength|SyntaxError|valid|CSS|selector|removeAttribute|isNaN|0n|even|odd|getElementsByTagName|children|childNodes|htmlFor|1id|position|descendant|starts|substring|text|parent|mod|singleNodeValue|selectSingleNode|WebKit5|html|focus|addClass|removeClass'.split('|'),0,{}))
if(!Array.prototype.contains){
Array.prototype.contains=function(_1){
return base2.Array2.contains(this,_1);
};
}
if(!Array.prototype.forEach){
Array.prototype.forEach=function(_2,_3){
return base2.Array2.forEach(this,_2,_3);
};
}
if(!Array.prototype.indexOf){
Array.prototype.indexOf=function(_4,_5){
return base2.Array2.indexOf(this,_4,_5);
};
}
if(!Array.prototype.insertAt){
Array.prototype.insertAt=function(_6,_7){
return base2.Array2.insertAt(this,_6,_7);
};
}
if(!Array.prototype.insertBefore){
Array.prototype.insertBefore=function(_8,_9){
return base2.Array2.insertBefore(this,_8,_9);
};
}
if(!Array.prototype.lastIndexOf){
Array.prototype.lastIndexOf=function(_a,_b){
return base2.Array2.lastIndexOf(this,_a,_b);
};
}
if(!Array.prototype.remove){
Array.prototype.remove=function(_c){
return base2.Array2.remove(this,_c);
};
}
if(!Array.prototype.removeAt){
Array.prototype.removeAt=function(_d){
return base2.Array2.removeAt(this,_d);
};
}
(function(){
$package("gara");
$class("Package",{exports:"",namespace:"",name:"",version:"",$constructor:function(_e){
this.name=_e.name||"gara";
this.imports=_e.imports||"";
this.exports=_e.exports||"";
if(this.name!="gara"){
gara.namespace+="var "+this.name+"=gara."+this.name;
this.name="gara."+this.name;
}
var _f=this.exports.split(",");
_f.forEach(function(v,k,arr){
this.namespace+="var "+v+"="+this.name+"."+v+";";
},this);
}});
$class("EventManager",{_instance:$static(null),$constructor:function(){
this._listeners=[];
base2.DOM.EventTarget(window);
window.addEventListener("unload",this,false);
},getInstance:$static(function(){
if(this._instance==null){
this._instance=new gara.EventManager();
}
return this._instance;
}),addListener:function(_13,_14,_15){
_13.addEventListener(_14,_15,false);
var _16={domNode:_13,type:_14,listener:_15};
this._listeners.push(_16);
return _16;
},handleEvent:function(e){
this._unregisterAllEvents();
},removeListener:function(e){
e.domNode.removeEventListener(e.type,e.listener,false);
if(this._listeners.contains(e)){
this._listeners.remove(e);
}
},_unregisterAllEvents:function(){
while(this._listeners.length>0){
var _19=this._listeners.pop();
this.removeListener(_19);
}
},toString:function(){
return "[gara.EventManager]";
}});
$class("OutOfBoundsException",{$extends:Exception,$constructor:function(_1a){
this.message=String(_1a);
this.name=$class.typeOf(this);
}});
var _1b=gara.onDOMLoaded=function(f){
if(document.addEventListener){
document.addEventListener("DOMContentLoaded",f,false);
}else{
if(window.ActiveX){
document.write("<scr"+"ipt id=__ie_onload defer src=javascript:void(0)></script>");
var _1d=document.getElementById("__ie_onload");
_1d.onreadystatechange=function(){
if(this.readyState=="complete"){
f();
}
};
}else{
if(/WebKit/i.test(navigator.userAgent)){
var _1e=setInterval(function(){
if(/loaded|complete/.test(document.readyState)){
f();
}
},10);
}else{
window.onload=f;
}
}
}
};
var _1f=new gara.Package({exports:"Package,EventManager,OutOfBoundsException",name:"gara"});
gara.namespace=_1f.namespace;
gara.toString=function(){
return "[gara]";
};
$package("");
})();
(function(){
$package("gara.jswt");
$class("JSWT",{ABORT:$static(1<<9),APPLICATION_MODAL:$static(1<<16),BOTTOM:$static(1<<10),CANCEL:$static(1<<8),CLOSE:$static(1<<6),DEFAULT:$static(0),DOWN:$static(1<<10),DRAG:$static(1),FULL_SELECTION:$static(1<<16),IGNORE:$static(1<<11),MENU:$static(1<<6),MULTI:$static(1<<1),NO:$static(1<<7),OK:$static(1<<5),RETRY:$static(1<<10),SINGLE:$static(1<<2),SYSTEM_MODAL:$static(1<<17),TOP:$static(1<<7),UP:$static(1<<7),YES:$static(1<<6),$constructor:function(){
}});
var _20=gara.jswt.JSWT;
$interface("FocusListener",{focusGained:function(){
},focusLost:function(){
},toString:function(){
return "[gara.jswt.FocusListener]";
}});
$interface("SelectionListener",{widgetSelected:function(_21){
},toString:function(){
return "[gara.jswt.SelectionListener]";
}});
$class("ItemNotExistsException",{$extends:gara.jswt.Exception,$constructor:function(_22){
this.message=String(_22);
this.name=$class.typeOf(this);
}});
function strReplace(_23,_24,_25){
output=""+_23;
while(output.indexOf(_24)>-1){
pos=output.indexOf(_24);
output=""+(output.substring(0,pos)+_25+output.substring((pos+_24.length),output.length));
}
return output;
}
$class("Widget",{domref:null,$constructor:function(){
this.domref=null;
this._className="";
this._baseClass="";
this._listener={};
},addClassName:function(_26){
this._className+=" "+_26;
this._changed=true;
},addListener:function(_27,_28){
if(!this._listener.hasOwnProperty(_27)){
this._listener[_27]=new Array();
}
this._listener[_27].push(_28);
this.registerListener(_27,_28);
},getClassName:function(){
return this._className;
},hasClassName:function(_29){
return this._className.indexOf(_29)!=-1;
},_notifyExternalKeyboardListener:function(e,obj,_2c){
if(this._listener.hasOwnProperty(e.type)){
var _2d=this._listener[e.type];
_2d.forEach(function(_2e,_2f,arr){
e.target.obj=obj;
e.target.control=_2c;
if(typeof (_2e)=="object"&&_2e.handleEvent){
_2e.handleEvent(e);
}else{
if(typeof (_2e)=="function"){
eval(_2e+"()");
}
}
});
}
},registerListener:$abstract(function(_31,_32){
}),removeClassName:function(_33){
this._className=strReplace(this._className,_33,"");
this._changed=true;
},removeListener:function(_34,_35){
this._listener[_34].remove(_35);
},toString:function(){
return "[gara.jswt.Widget]";
}});
$class("Control",{$extends:gara.jswt.Widget,$constructor:function(_36,_37){
this.$base();
this._parent=_36;
this._style=typeof (_37)=="undefined"?gara.jswt.DEFAULT:_37;
this._focusListener=[];
this._hasFocus=false;
gara.jswt.ControlManager.getInstance().addControl(this);
this.addFocusListener(gara.jswt.ControlManager.getInstance());
},addFocusListener:function(_38){
if(!$class.implementationOf(_38,gara.jswt.FocusListener)){
throw new TypeError("listener is not a gara.jswt.FocusListener");
}
this._focusListener.push(_38);
},forceFocus:function(){
this._hasFocus=true;
this.removeClassName(this._baseClass+"Inactive");
this.addClassName(this._baseClass+"Active");
this.update();
for(var i=0,len=this._focusListener.length;i<len;++i){
this._focusListener[i].focusGained(this);
}
},handleEvent:$abstract(function(e){
}),isFocusControl:function(){
return this._hasFocus;
},looseFocus:function(){
this._hasFocus=false;
this.removeClassName(this._baseClass+"Active");
this.addClassName(this._baseClass+"Inactive");
this.update();
for(var i=0,len=this._focusListener.length;i<len;++i){
this._focusListener[i].focusLost(this);
}
},removeFocusListener:function(_3e){
if(!_3e.$class.implementsInterface(gara.jswt.FocusListener)){
throw new TypeError("listener is not a gara.jswt.FocusListener");
}
if(this._focusListener.contains(_3e)){
this._focusListener.remove(_3e);
}
},toString:function(){
return "[gara.jswt.Control";
},update:$abstract(function(){
})});
$class("Composite",{$extends:gara.jswt.Control,$constructor:function(_3f,_40){
this.$base(_3f,_40);
}});
$class("List",{$extends:gara.jswt.Control,$constructor:function(_41,_42){
this.$base(_41,_42);
if(this._style==_20.DEFAULT){
this._style=_20.SINGLE;
}
this._items=[];
this._selection=[];
this._selectionListener=[];
this._activeItem=null;
this._shiftItem=null;
this._className=this._baseClass="jsWTList";
},_activateItem:function(_43){
if(!$class.instanceOf(_43,gara.jswt.ListItem)){
throw new TypeError("item is not type of gara.jswt.ListItem");
}
if(this._activeItem!=null){
this._activeItem.setActive(false);
}
this._activeItem=_43;
this._activeItem.setActive(true);
this.update();
},addItem:function(_44){
if(!$class.instanceOf(_44,gara.jswt.ListItem)){
throw new TypeError("item is not type of gara.jswt.ListItem");
}
this._items.push(_44);
},addSelectionListener:function(_45){
if(!$class.instanceOf(_45,gara.jswt.SelectionListener)){
throw new TypeError("listener is not instance of gara.jswt.SelectionListener");
}
this._selectionListener.push(_45);
},deselect:function(_46){
if(!$class.instanceOf(_46,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(this._selection.contains(_46)){
this._selection.remove(_46);
this.notifySelectionListener();
_46.setUnselected();
this._shiftItem=_46;
this._activateItem(_46);
}
},deselectAll:function(){
for(var i=0,len=this._items.length;i<len;++i){
this.deselect(this._items[i]);
}
this.update();
},getItem:function(_49){
if(_49>=this._items.length){
throw new gara.OutOfBoundsException("Your item lives outside of this list");
}
return this._items[_49];
},getItemCount:function(){
return this._items.length;
},getItems:function(){
return this._items;
},getSelection:function(){
return this._selection;
},getSelectionCount:function(){
return this._selection.length;
},handleEvent:function(e){
var obj=e.target.obj||null;
switch(e.type){
case "mousedown":
if(!this._hasFocus){
this.forceFocus();
}
if($class.instanceOf(obj,gara.jswt.ListItem)){
var _4c=obj;
if(!e.ctrlKey&&!e.shiftKey){
this.select(_4c,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_4c,true);
}else{
if(e.shiftKey){
this.selectRange(_4c,false);
}else{
if(e.ctrlKey){
if(this._selection.contains(_4c)){
this.deselect(_4c);
}else{
this.select(_4c,true);
}
}else{
this.select(_4c);
}
}
}
}
}
break;
case "keyup":
case "keydown":
case "keypress":
this._items.forEach(function(_4d,_4e,arr){
_4d.handleEvent(e);
});
this._notifyExternalKeyboardListener(e,this,this);
if(e.type=="keydown"){
this._handleKeyEvent(e);
}
break;
}
e.stopPropagation();
},_handleKeyEvent:function(e){
if(this._activeItem==null){
return;
}
switch(e.keyCode){
case 38:
var _51=false;
var _52=this.indexOf(this._activeItem);
if(_52!=0){
_51=this._items[_52-1];
}
if(_51){
if(!e.ctrlKey&&!e.shiftKey){
this.select(_51,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_51,true);
}else{
if(e.shiftKey){
this.selectRange(_51,false);
}else{
if(e.ctrlKey){
this._activateItem(_51);
}
}
}
}
}
break;
case 40:
var _53=false;
var _52=this.indexOf(this._activeItem);
if(_52!=this._items.length-1){
_53=this._items[_52+1];
}
if(_53){
if(!e.ctrlKey&&!e.shiftKey){
this.select(_53,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this.selectRange(_53,true);
}else{
if(e.shiftKey){
this.selectRange(_53,false);
}else{
if(e.ctrlKey){
this._activateItem(_53);
}
}
}
}
}
break;
case 32:
if(this._selection.contains(this._activeItem)&&e.ctrlKey){
this.deselect(this._activeItem);
}else{
this.select(this._activeItem,true);
}
break;
case 36:
if(!e.ctrlKey&&!e.shiftKey){
this.select(this._items[0],false);
}else{
if(e.shiftKey){
this.selectRange(this._items[0],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[0]);
}
}
}
break;
case 35:
var _54=this._items.length-1;
if(!e.ctrlKey&&!e.shiftKey){
this.select(this._items[_54],false);
}else{
if(e.shiftKey){
this.selectRange(this._items[_54],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[_54]);
}
}
}
break;
}
},indexOf:function(_55){
if(!$class.instanceOf(_55,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(!this._items.contains(_55)){
throw new gara.jswt.ItemNotExistsException("item ["+_55+"] does not exists in this list");
return;
}
return this._items.indexOf(_55);
},notifySelectionListener:function(){
for(var i=0,len=this._selectionListener.length;i<len;++i){
this._selectionListener[i].widgetSelected(this);
}
},registerListener:function(_58,_59){
if(this.domref!=null){
gara.EventManager.getInstance().addListener(this.domref,_58,_59);
}
},removeSelectionListener:function(_5a){
if(!$class.instanceOf(_5a,gara.jswt.SelectionListener)){
throw new TypeError("listener is not instance of gara.jswt.SelectionListener");
}
if(this._selectionListener.contains(_5a)){
this._selectionListener.remove(_5a);
}
},select:function(_5b,_5c){
if(!$class.instanceOf(_5b,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(!_5c||(this._style&gara.jswt.SINGLE)==gara.jswt.SINGLE){
while(this._selection.length){
this._selection.pop().setUnselected();
}
}
if(!this._selection.contains(_5b)){
this._selection.push(_5b);
_5b.setSelected();
this._shiftItem=_5b;
this._activateItem(_5b);
this.notifySelectionListener();
}
},selectAll:function(){
for(var i=0,len=this._items.length;i<len;++i){
this.select(this._items[i],true);
}
this.update();
},selectRange:function(_5f,_60){
if(!$class.instanceOf(_5f,gara.jswt.ListItem)){
throw new TypeError("item not instance of gara.jswt.ListItem");
}
if(!_60){
while(this._selection.length){
this._selection.pop().setUnselected();
}
}
if((this._style&_20.MULTI)==_20.MULTI){
var _61=this.indexOf(this._shiftItem);
var _62=this.indexOf(_5f);
var _63=_61>_62?_62:_61;
var to=_61<_62?_62:_61;
for(var i=_63;i<=to;++i){
this._selection.push(this._items[i]);
this._items[i].setSelected();
}
this._activateItem(_5f);
this.notifySelectionListener();
}else{
this.select(_5f);
}
},toString:function(){
return "[gara.jswt.List]";
},update:function(){
if(this.domref==null){
this.domref=document.createElement("ul");
this.domref.obj=this;
this.domref.control=this;
base2.DOM.EventTarget(this.domref);
var _66={};
for(var _67 in this._listener){
_66[_67]=this._listener[_67].concat([]);
}
this.addListener("mousedown",this);
for(var _67 in _66){
_66[_67].forEach(function(_68,_69,arr){
this.registerListener(_67,_68);
},this);
}
if(!$class.instanceOf(this._parent,gara.jswt.Composite)){
this._parent.appendChild(this.domref);
}
}
this.removeClassName("jsWTListFullSelection");
if((this._style&_20.FULL_SELECTION)==_20.FULL_SELECTION){
this.addClassName("jsWTListFullSelection");
}
this.domref.className=this._className;
this._items.forEach(function(_6b,_6c,arr){
if(!_6b.isCreated()){
node=_6b.create();
this.domref.appendChild(node);
}
if(_6b.hasChanged()){
_6b.update();
_6b.releaseChange();
}
},this);
}});
$class("Tree",{$extends:gara.jswt.Composite,$constructor:function(_6e,_6f){
this.$base(_6e,_6f);
if(this._style==_20.DEFAULT){
this._style=_20.SINGLE;
}
this._showLines=true;
this._shiftItem=null;
this._activeItem=null;
this._className=this._baseClass="jsWTTree";
this._selection=[];
this._selectionListeners=[];
this._items=[];
this._firstLevelItems=[];
},_activateItem:function(_70){
if(!$class.instanceOf(_70,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(this._activeItem!=null){
this._activeItem.setActive(false);
}
this._activeItem=_70;
this._activeItem.setActive(true);
this.update();
},_addItem:function(_71){
if(!$class.instanceOf(_71,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
var _72=_71.getParentItem();
if(_72==null){
this._items.push(_71);
this._firstLevelItems.push(_71);
}else{
var _73=this._items.indexOf(_72)+getDescendents(_72)+1;
this._items.splice(_73,0,_71);
}
function getDescendents(_74){
var _75=0;
if(_74.getItemCount()>0){
_74.getItems().forEach(function(_76,_77,arr){
if(_76.getItemCount()>0){
_75+=getDescendents(_76);
}
_75++;
},this);
}
return _75;
}
},addSelectionListener:function(_79){
if(!$class.instanceOf(item,gara.jswt.SelectionListener)){
throw new TypeError("listener is not type of gara.jswt.SelectionListener");
}
if(!this._selectionListeners.contains(_79)){
this._selectionListeners.push(_79);
}
},deselect:function(_7a){
if(!$class.instanceOf(_7a,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(this._selection.contains(_7a)&&_7a.getParent()==this){
this._selection.remove(_7a);
this._notifySelectionListener();
_7a.setChecked(false);
this._shiftItem=_7a;
this._activateItem(_7a);
}
},deselectAll:function(){
for(var i=this._selection.length;i>=0;--i){
this.deselect(this._selection[i]);
}
this.update();
},getItem:function(_7c){
if(_7c>=this._items.length){
throw new gara.OutOfBoundsException("Your item lives outside of this Tree");
}
return this._items[_7c];
},getItemCount:function(){
return this._items.length;
},getItems:function(){
return this._items;
},getLinesVisible:function(){
return this._showLines;
},getSelection:function(){
return this._selection;
},getSelectionCount:function(){
return this._selection.length;
},handleEvent:function(e){
var obj=e.target.obj||null;
var _7f=null;
if($class.instanceOf(obj,gara.jswt.TreeItem)){
_7f=obj;
}
switch(e.type){
case "mousedown":
if(!this._hasFocus){
this.forceFocus();
}
if(_7f!=null){
if(e.ctrlKey&&!e.shiftKey){
if(this._selection.contains(_7f)){
this.deselect(_7f);
}else{
this._select(_7f,true);
}
}else{
if(!e.ctrlKey&&e.shiftKey){
this._selectShift(_7f,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this._selectShift(_7f,true);
}else{
this._select(_7f,false);
}
}
}
}
break;
case "dblclick":
break;
case "keyup":
case "keydown":
case "keypress":
this._items.forEach(function(_80,_81,arr){
_80.handleEvent(e);
});
this._notifyExternalKeyboardListener(e,this,this);
if(e.type=="keydown"){
this._handleKeyEvent(e);
}
break;
}
if(_7f!=null){
_7f.handleEvent(e);
}
e.stopPropagation();
},_handleKeyEvent:function(e){
if(this._activeItem==null){
return;
}
switch(e.keyCode){
case 38:
var _84;
if(this._activeItem==this._items[0]){
_84=false;
}else{
var _85;
var _86=this._activeItem.getParentItem();
if(_86==null){
_85=this._firstLevelItems;
}else{
_85=_86.getItems();
}
var _87=_85.indexOf(this._activeItem);
if(_87==0){
_84=_86;
}else{
var _88=_85[_87-1];
_84=getLastItem(_88);
}
}
if(_84){
if(!e.ctrlKey&&!e.shiftKey){
this._select(_84,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this._selectShift(_84,true);
}else{
if(e.shiftKey){
this._selectShift(_84,false);
}else{
if(e.ctrlKey){
this._activateItem(_84);
}
}
}
}
}
break;
case 40:
var _89;
var _85;
if(this._activeItem==this._items[this._items.length-1]){
_89=false;
}else{
var _86=this._activeItem.getParentItem();
if(_86==null){
_85=this._firstLevelItems;
}else{
_85=_86.getItems();
}
var _87=_85.indexOf(this._activeItem);
if(this._activeItem.getItemCount()>0&&this._activeItem.getExpanded()){
_89=this._activeItem.getItems()[0];
}else{
if(this._activeItem.getItemCount()>0&&!this._activeItem.getExpanded()){
_89=this._items[this._items.indexOf(this._activeItem)+countItems(this._activeItem)+1];
}else{
_89=this._items[this._items.indexOf(this._activeItem)+1];
}
}
}
if(_89){
if(!e.ctrlKey&&!e.shiftKey){
this._select(_89,false);
}else{
if(e.ctrlKey&&e.shiftKey){
this._selectShift(_89,true);
}else{
if(e.shiftKey){
this._selectShift(_89,false);
}else{
if(e.ctrlKey){
this._activateItem(_89);
}
}
}
}
}
break;
case 37:
var _8a=this._activeItem;
this._activeItem.setExpanded(false);
this._activateItem(_8a);
this.update();
break;
case 39:
this._activeItem.setExpanded(true);
this.update();
break;
case 32:
if(this._selection.contains(this._activeItem)&&e.ctrlKey){
this.deselect(this._activeItem);
}else{
this._select(this._activeItem,true);
}
break;
case 36:
if(!e.ctrlKey&&!e.shiftKey){
this._select(this._items[0],false);
}else{
if(e.shiftKey){
this._selectShift(this._items[0],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[0]);
}
}
}
break;
case 35:
if(!e.ctrlKey&&!e.shiftKey){
this._select(this._items[this._items.length-1],false);
}else{
if(e.shiftKey){
this._selectShift(this._items[this._items.length-1],false);
}else{
if(e.ctrlKey){
this._activateItem(this._items[this._items.length-1]);
}
}
}
break;
}
function getLastItem(_8b){
if(_8b.getExpanded()&&_8b.getItemCount()>0){
return getLastItem(_8b.getItems()[_8b.getItemCount()-1]);
}else{
return _8b;
}
}
function countItems(_8c){
var _8d=0;
var _8e=_8c.getItems();
for(var i=0;i<_8e.length;++i){
_8d++;
if(_8e[i].getItemCount()>0){
_8d+=countItems(_8e[i]);
}
}
return _8d;
}
},indexOf:function(_90){
if(!$class.instanceOf(_90,gara.jswt.TreeItem)){
throw new TypeError("item not instance of gara.jswt.TreeItem");
}
if(!this._items.contains(_90)){
throw new gara.jswt.ItemNotExistsException("item ["+_90+"] does not exists in this list");
console.log("des item gibts hier ned: "+_90.getText());
return;
}
return this._items.indexOf(_90);
},_notifySelectionListener:function(){
this._selectionListeners.forEach(function(_91,_92,arr){
_91.widgetSelected(this);
},this);
},registerListener:function(_94,_95){
if(this.domref!=null){
gara.EventManager.getInstance().addListener(this.domref,_94,_95);
}
},removeSelectionListener:function(_96){
if(!$class.instanceOf(item,gara.jswt.SelectionListener)){
throw new TypeError("item is not type of gara.jswt.SelectionListener");
}
if(this._selectionListeners.contains(_96)){
this._selectionListeners.remove(_96);
}
},_select:function(_97,_98){
if(!$class.instanceOf(_97,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(!_98||(this._style&_20.SINGLE)==_20.SINGLE){
while(this._selection.length){
this._selection.pop().setChecked(false);
}
}
if(!this._selection.contains(_97)&&_97.getParent()==this){
this._selection.push(_97);
_97.setChecked(true);
this._shiftItem=_97;
this._activateItem(_97);
this._notifySelectionListener();
}
},selectAll:function(){
this._items.forEach(function(_99,_9a,arr){
this._select(_99,true);
},this);
this.update();
},_selectShift:function(_9c,_9d){
if(!$class.instanceOf(_9c,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
if(!_9d){
while(this._selection.length){
this._selection.pop().setChecked(false);
}
}
if((this._style&_20.MULTI)==_20.MULTI){
var _9e=this.indexOf(this._shiftItem);
var _9f=this.indexOf(_9c);
var _a0=_9e>_9f?_9f:_9e;
var to=_9e<_9f?_9f:_9e;
for(var i=_a0;i<=to;++i){
this._selection.push(this._items[i]);
this._items[i].setChecked(true);
}
this._activateItem(_9c);
this._notifySelectionListener();
}else{
this._select(_9c);
}
},setLinesVisible:function(_a3){
this._showLines=_a3;
},toString:function(){
return "[gara.jswt.Tree]";
},update:function(){
if(this.domref==null){
this.domref=document.createElement("ul");
this.domref.obj=this;
this.domref.control=this;
base2.DOM.EventTarget(this._domref);
var _a4={};
for(var _a5 in this._listener){
_a4[_a5]=this._listener[_a5].concat([]);
}
this.addListener("mousedown",this);
this.addListener("dblclick",this);
for(var _a5 in _a4){
_a4[_a5].forEach(function(_a6,_a7,arr){
this.registerListener(_a5,_a6);
},this);
}
if(!$class.instanceOf(this._parent,gara.jswt.Composite)){
this._parent.appendChild(this.domref);
}
}
this.removeClassName("jsWTTreeNoLines");
this.removeClassName("jsWTTreeLines");
this.removeClassName("jsWTTreeFullSelection");
if(this._showLines){
this.addClassName("jsWTTreeLines");
}else{
this.addClassName("jsWTTreeNoLines");
}
if((this._style&_20.FULL_SELECTION)==_20.FULL_SELECTION){
this.addClassName("jsWTTreeFullSelection");
}
this.domref.className=this._className;
this._updateItems(this._firstLevelItems,this.domref);
},_updateItems:function(_a9,_aa){
var _ab=_a9.length;
_a9.forEach(function(_ac,_ad,arr){
var _af=(_ad+1)==_ab;
if(!_ac.isCreated()){
_ac.create(_af);
_aa.appendChild(_ac.domref);
}
if(_ac.hasChanged()){
_ac.update();
_ac.releaseChange();
}
if(_ac.getItemCount()>0){
var _b0=_ac._getChildContainer();
this._updateItems(_ac.getItems(),_b0);
}
if(_af&&_ac.getClassName().indexOf("bottom")==-1){
_ac.addClassName("bottom");
if(_ac.getItemCount()>0){
var cc=_ac._getChildContainer();
cc.className="bottom";
}
}else{
if(!_af&&_ac.getClassName().indexOf("bottom")!=-1){
_ac.removeClassName("bottom");
if(_ac.getItemCount()>0){
var cc=_ac._getChildContainer();
cc.className=null;
}
}
}
},this);
}});
$class("TabFolder",{$extends:gara.jswt.Composite,$constructor:function(_b2,_b3){
this.$base(_b2,_b3);
if(this._style==_20.DEFAULT){
this._style=_20.TOP;
}
this._items=[];
this._activeItem=null;
this._selectionListener=[];
this._selection=[];
this._tabbar=null;
this._clientArea=null;
this._className=this._baseClass="jsWTTabFolder";
},_addItem:function(_b4){
if(!$class.instanceOf(_b4,gara.jswt.TabItem)){
throw new TypeError("item is not type of gara.jswt.TabItem");
}
var _b5=this.getItemCount();
this._items.push(_b4);
},addSelectionListener:function(_b6){
if(!$class.instanceOf(_b6,gara.jswt.SelectionListener)){
throw new TypeError("listener is not instance of gara.jswt.SelectionListener");
}
this._selectionListener.push(_b6);
},_activateItem:function(_b7){
if(!$class.instanceOf(_b7,gara.jswt.TabItem)){
throw new TypeError("item is not type of gara.jswt.TabItem");
}
if(this._activeItem!=null){
this._activeItem.setActive(false);
}
this._activeItem=_b7;
_b7._setActive(true);
for(var i=0,len=this._clientArea.childNodes.length;i<len;++i){
this._clientArea.removeChild(this._clientArea.childNodes[i]);
}
if(_b7.getControl()!=null){
_b7.getControl().update();
this._clientArea.appendChild(_b7.getControl().domref);
}else{
if(typeof (_b7.getContent())=="string"){
this._clientArea.appendChild(document.createTextNode(_b7.getContent()));
}else{
this._clientArea.appendChild(_b7.getContent());
}
}
this.update();
this._selection=[];
this._selection.push(_b7);
this._notifySelectionListener();
},getClientArea:function(){
return this._clientArea;
},getItem:function(_ba){
if(_ba>=this._items.length){
throw new gara.OutOfBoundsException("Your item lives outside of this tabfolder");
}
return this._items[_ba];
},getItemCount:function(){
return this._items.length;
},getItems:function(){
return this._items;
},getSelection:function(){
return this._selection;
},getSelectionIndex:function(){
if(this._selection.length){
return this._items.indexOf(this._selection[0]);
}else{
return -1;
}
},handleEvent:function(e){
var obj=e.target.obj||null;
switch(e.type){
case "mousedown":
if(!this._hasFocus){
this.forceFocus();
}
if($class.instanceOf(obj,gara.jswt.TabItem)){
var _bd=obj;
this._activateItem(_bd);
}
break;
case "keyup":
case "keydown":
case "keypress":
this._items.forEach(function(_be,_bf,arr){
_be.handleEvent(e);
});
this._notifyExternalKeyboardListener(e,this,this);
break;
}
if(e.target!=this.domref){
e.stopPropagation();
}
},indexOf:function(_c1){
if(!$class.instanceOf(_c1,gara.jswt.TabItem)){
throw new TypeError("item not instance of gara.jswt.TabItem");
}
if(!this._items.contains(_c1)){
throw new gara.jswt.ItemNotExistsException("item ["+_c1+"] does not exists in this list");
}
return this._items.indexOf(_c1);
},_notifySelectionListener:function(){
for(var i=0,len=this._selectionListener.length;i<len;++i){
this._selectionListener[i].widgetSelected(this);
}
},registerListener:function(_c4,_c5){
if(this.domref!=null){
gara.EventManager.getInstance().addListener(this.domref,_c4,_c5);
}
},removeSelectionListener:function(_c6){
if(!$class.instanceOf(_c6,gara.jswt.SelectionListener)){
throw new TypeError("listener is not instance of gara.jswt.SelectionListener");
}
if(this._selectionListener.contains(_c6)){
this._selectionListener.remove(_c6);
}
},setSelection:function(arg){
if(typeof (arg)=="number"){
if(arg>=this._items.length){
throw new gara.OutOfBoundsException("Your item lives outside of this tabfolder");
}
this._activateItem(this._items[arg]);
}else{
if($class.instanceOf(arg,Array)){
if(arg.length){
this._activateItem(arg[0]);
}
}
}
},_showContent:function(_c8){
},toString:function(){
return "[gara.jswt.TabFolder]";
},update:function(){
var _c9=false;
if(this.domref==null){
this.domref=document.createElement("div");
this.domref.obj=this;
this.domref.control=this;
base2.DOM.EventTarget(this.domref);
this._tabbar=document.createElement("ul");
this._tabbar.obj=this;
this._tabbar.control=this;
base2.DOM.EventTarget(this._tabbar);
this._clientArea=document.createElement("div");
this._clientArea.className="jsWTTabClientArea";
base2.DOM.EventTarget(this._clientArea);
if(this._style==_20.TOP){
this.domref.appendChild(this._tabbar);
this.domref.appendChild(this._clientArea);
this._tabbar.className="jsWTTabbar jsWTTabbarTop";
}else{
this.domref.appendChild(this._clientArea);
this.domref.appendChild(this._tabbar);
this._tabbar.className="jsWTTabbar jsWTTabbarBottom";
}
var _ca={};
for(var _cb in this._listener){
_ca[_cb]=this._listener[_cb].concat([]);
}
this.addListener("mousedown",this);
for(var _cb in _ca){
_ca[_cb].forEach(function(_cc,_cd,arr){
this.registerListener(_cb,_cc);
},this);
}
if(!$class.instanceOf(this._parent,gara.jswt.Composite)){
this._parent.appendChild(this.domref);
}
_c9=true;
}
this.domref.className=this._className;
this._items.forEach(function(_cf,_d0,arr){
if(!_cf.isCreated()){
node=_cf._create();
this._tabbar.appendChild(node);
}
if(_cf.hasChanged()){
_cf.update();
_cf.releaseChange();
}
},this);
if(_c9&&this._items.length){
this._activateItem(this._items[0]);
}
}});
$class("Item",{$extends:gara.jswt.Widget,$constructor:function(){
this.$base();
this._changed=false;
this._image=null;
this._text="";
},getImage:function(){
return this._image;
},getText:function(){
return this._text;
},hasChanged:function(){
return this._changed;
},isCreated:function(){
return this.domref!=null;
},releaseChange:function(){
this._changed=false;
},setActive:function(_d2){
this._active=_d2;
if(_d2){
this.addClassName("active");
}else{
this.removeClassName("active");
}
this._changed=true;
},setImage:function(_d3){
this._image=_d3;
this._changed=true;
},setSelected:function(){
this.addClassName("selected");
},setText:function(_d4){
this._text=_d4;
this._changed=true;
},setUnselected:function(){
this.removeClassName("selected");
},toString:function(){
return "[gara.jswt.Item]";
}});
$class("ListItem",{$extends:gara.jswt.Item,$constructor:function(_d5){
if(!$class.instanceOf(_d5,gara.jswt.List)){
throw new TypeError("list is not type of gara.jswt.List");
}
this.$base();
this._list=_d5;
this._list.addItem(this);
this._span=null;
this._spanText=null;
this._img=null;
},create:function(){
this.domref=document.createElement("li");
this.domref.className=this._className;
this.domref.obj=this;
this.domref.control=this._list;
this._img=null;
if(this.image!=null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._list;
this._img.src=this.image.src;
this._img.alt=this._text;
this.domref.appendChild(this._img);
}
this._spanText=document.createTextNode(this._text);
this._span=document.createElement("span");
this._span.obj=this;
this._span.control=this._list;
this._span.appendChild(this._spanText);
this.domref.appendChild(this._span);
base2.DOM.EventTarget(this.domref);
base2.DOM.EventTarget(this._span);
for(var _d6 in this._listener){
this._listener[_d6].forEach(function(_d7,_d8,arr){
this.registerListener(_d6,_d7);
},this);
}
this._changed=false;
return this.domref;
},handleEvent:function(e){
switch(e.type){
case "keyup":
case "keydown":
case "keypress":
this._notifyExternalKeyboardListener(e,this,this._list);
break;
}
},registerListener:function(_db,_dc){
if(this._img!=null){
gara.EventManager.getInstance().addListener(this._img,_db,_dc);
}
if(this._span!=null){
gara.EventManager.getInstance().addListener(this._span,_db,_dc);
}
},toString:function(){
return "[gara.jswt.ListItem]";
},update:function(){
if(this._image!=null&&this._img==null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._list;
this._img.alt=this._text;
this._img.src=this._image.src;
this.domref.insertBefore(this._img,this._span);
base2.DOM.EventTarget(this._img);
for(var _dd in this._listener){
this._listener[_dd].forEach(function(_de,_df,arr){
this.registerListener(this._img,_dd,_de);
},this);
}
}else{
if(this._image!=null){
this._img.src=this._image.src;
this._img.alt=this._text;
}else{
if(this._img!=null&&this._image==null){
this.domref.removeChild(this._img);
this._img=null;
for(var _dd in this._listener){
this._listener[_dd].forEach(function(_e1,_e2,arr){
gara.EventManager.getInstance().removeListener({domNode:this._img,type:_dd,listener:_e1});
},this);
}
}
}
}
this._spanText.nodeValue=this._text;
this.domref.className=this._className;
}});
$class("TreeItem",{$extends:gara.jswt.Item,$constructor:function(_e4){
this.$base();
if(!($class.instanceOf(_e4,gara.jswt.Tree)||$class.instanceOf(_e4,gara.jswt.TreeItem))){
throw new TypeError("parentWidget is neither a gara.jswt.Tree or gara.jswt.TreeItem");
}
this._items=new Array();
this._expanded=true;
this._checked=false;
this._changed=false;
this._childContainer=null;
this._parent=_e4;
this._tree=null;
if($class.instanceOf(_e4,gara.jswt.Tree)){
this._tree=_e4;
}else{
if($class.instanceOf(_e4,gara.jswt.TreeItem)){
this._tree=_e4.getParent();
_e4._addItem(this);
}
}
this._tree._addItem(this);
this._img=null;
this._toggler=null;
this._span=null;
this._spanText=null;
},_addItem:function(_e5){
if(!$class.instanceOf(_e5,gara.jswt.TreeItem)){
throw new TypeError("item is not type of gara.jswt.TreeItem");
}
this._items.push(_e5);
},create:function(_e6){
if(_e6){
this.addClassName("bottom");
}
this.domref=document.createElement("li");
this.domref.className=this._className;
this.domref.obj=this;
this.domref.control=this._tree;
base2.DOM.EventTarget(this.domref);
this._toggler=document.createElement("span");
this._toggler.obj=this;
this._toggler.control=this._tree;
base2.DOM.EventTarget(this._toggler);
this._span=document.createElement("span");
this._span.obj=this;
this._span.control=this._tree;
this._span.className="text";
this._spanText=document.createTextNode(this._text);
this._span.appendChild(this._spanText);
base2.DOM.EventTarget(this._span);
this._toggler.className="toggler";
this._toggler.className+=this._hasChilds()?(this._expanded?" togglerExpanded":" togglerCollapsed"):"";
this.domref.appendChild(this._toggler);
if(this._image!=null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.src=this._image.src;
this._img.control=this._tree;
base2.DOM.EventTarget(this._img);
this.domref.appendChild(this._img);
}
this.domref.appendChild(this._span);
if(this._hasChilds()){
this._createChildContainer();
}
for(var _e7 in this._listeners){
this._listeners[_e7].forEach(function(_e8,_e9,arr){
this.registerListener(_e7,_e8);
},this);
}
},_createChildContainer:function(){
this._childContainer=document.createElement("ul");
base2.DOM.EventTarget(this._childContainer);
if(this.getClassName().indexOf("bottom")!=-1){
this._childContainer.className="bottom";
}
if(this._expanded){
this._childContainer.style.display="block";
}else{
this._childContainer.style.display="none";
}
this.domref.appendChild(this._childContainer);
},_deselectItems:function(){
this._items.forEach(function(_eb,_ec,arr){
if(_eb._hasChilds()){
_eb._deselectItems();
}
this._tree.deselect(_eb);
},this);
},_getChildContainer:function(){
if(this._childContainer==null){
this._createChildContainer();
}
return this._childContainer;
},getChecked:function(){
return this._checked;
},getExpanded:function(){
return this._expanded;
},getItem:function(_ee){
if(_ee>=this._items.length){
throw new gara.OutOfBoundsException("Your item lives outside of this Tree");
}
return this._items[_ee];
},getItemCount:function(){
return this._items.length;
},getItems:function(){
return this._items;
},getParent:function(){
return this._tree;
},getParentItem:function(){
if(this._parent==this._tree){
return null;
}else{
return this._parent;
}
},_hasChilds:function(){
return this._items.length>0;
},handleEvent:function(e){
var obj=e.target.obj||null;
switch(e.type){
case "mousedown":
if($class.instanceOf(obj,gara.jswt.TreeItem)){
var _f1=obj;
if(e.target==this._toggler){
if(this._expanded){
this.setExpanded(false);
}else{
this.setExpanded(true);
}
this._tree.update();
}
}
break;
case "dblclick":
if($class.instanceOf(obj,gara.jswt.TreeItem)){
var _f1=obj;
if(e.target!=this._toggler){
if(this._expanded){
this.setExpanded(false);
}else{
this.setExpanded(true);
}
this._tree.update();
}
}
break;
case "keyup":
case "keydown":
case "keypress":
this._notifyExternalKeyboardListener(e,this,this._tree);
break;
}
},indexOf:function(_f2){
if(!$class.instanceOf(_f2,gara.jswt.TreeItem)){
throw new TypeError("item not instance of gara.jswt.TreeItem");
}
if(!this._items.contains(_f2)){
throw new gara.jswt.ItemNotExistsException("item ["+_f2+"] does not exists in this list");
return;
}
return this._items.indexOf(_f2);
},registerListener:function(_f3,_f4){
if(this._img!=null){
gara.EventManager.getInstance().addListener(this._img,_f3,_f4);
}
if(this._span!=null){
gara.EventManager.getInstance().addListener(this._span,_f3,_f4);
}
},removeAll:function(){
this._items=[];
},setActive:function(_f5){
this._active=_f5;
if(_f5){
this._span.className+=" active";
}else{
this._span.className=this._span.className.replace(/ *active/,"");
}
this._changed=true;
},setChecked:function(_f6){
if(_f6){
this._span.className="text selected";
}else{
this._span.className="text";
}
this._checked=_f6;
},setExpanded:function(_f7){
this._expanded=_f7;
if(!_f7){
this._deselectItems();
}
this._changed=true;
},toString:function(){
return "[gara.jswt.TreeItem]";
},update:function(){
if(this._hasChilds()){
this._toggler.className=strReplace(this._toggler.className," togglerCollapsed","");
this._toggler.className=strReplace(this._toggler.className," togglerExpanded","");
if(this._expanded){
this._toggler.className+=" togglerExpanded";
}else{
this._toggler.className+=" togglerCollapsed";
}
}
if(this._image!=null&&this._img==null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._tree;
this._img.alt=this._text;
this._img.src=this._image.src;
this.domref.insertBefore(this._img,this._span);
base2.DOM.EventTarget(this._img);
}else{
if(this._image!=null){
this._img.src=this._image.src;
this._img.alt=this._text;
}else{
if(this._img!=null&&this._image==null){
this.domref.removeChild(this._img);
this._img=null;
}
}
}
if(this._hasChilds()&&this._childContainer==null){
this._createChildContainer();
}
if(this._childContainer!=null){
if(this._expanded){
this._childContainer.style.display="block";
}else{
this._childContainer.style.display="none";
}
}else{
if(!this._hasChilds()&&this._childContainer!=null){
this.domref.removeChild(this._childContainer);
this._childContainer=null;
}
}
this._spanText.nodeValue=this._text;
this.domref.className=this._className;
}});
$class("TabItem",{$extends:gara.jswt.Item,$constructor:function(_f8){
this.$base();
if(!$class.instanceOf(_f8,gara.jswt.TabFolder)){
throw new TypeError("parentWidget is neither a gara.jswt.TabFolder");
}
this._parent=_f8;
this._active=false;
this._content=null;
this._control=null;
this._toolTipText=null;
this._span=null;
this._img=null;
this._parent._addItem(this);
},_create:function(){
this.domref=document.createElement("li");
this.domref.className=this._className;
this.domref.obj=this;
this.domref.control=this._parent;
if(this._toolTipText!=null){
this.domref.title=this._toolTipText;
}
base2.DOM.EventTarget(this.domref);
if(this.image!=null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._parent;
this._img.src=this.image.src;
this._img.alt=this._text;
base2.DOM.EventTarget(this._img);
this.domref.appendChild(this._img);
}
this._spanText=document.createTextNode(this._text);
this._span=document.createElement("span");
this._span.obj=this;
this._span.control=this._parent;
this._span.appendChild(this._spanText);
this.domref.appendChild(this._span);
base2.DOM.EventTarget(this._span);
for(var _f9 in this._listener){
this._listener[_f9].forEach(function(_fa,_fb,arr){
this.registerListener(_f9,_fa);
},this);
}
this._changed=false;
return this.domref;
},getContent:function(){
return this._content;
},getControl:function(){
return this._control;
},getToolTipText:function(){
return this._toolTipText;
},handleEvent:function(e){
switch(e.type){
case "keyup":
case "keydown":
case "keypress":
this._notifyExternalKeyboardListener(e,this,this._parent);
break;
}
},registerListener:function(){
if(this.domref!=null){
gara.EventManager.getInstance().addListener(this.domref,eventType,listener);
}
},_setActive:function(_fe){
this._active=_fe;
if(_fe){
this._className+=" active";
}else{
this._className=this._className.replace(/ *active/,"");
}
this._changed=true;
},setContent:function(_ff){
this._content=_ff;
this._changed=true;
},setControl:function(_100){
if(!$class.instanceOf(_100,gara.jswt.Control)){
throw new TypeError("control is not instance of gara.jswt.Control");
}
this._control=_100;
},setToolTipText:function(text){
this._toolTipText=text;
this._changed=true;
},update:function(){
if(this._image!=null&&this._img==null){
this._img=document.createElement("img");
this._img.obj=this;
this._img.control=this._parent;
this._img.alt=this._text;
this._img.src=this._image.src;
this.domref.insertBefore(this._img,this._span);
base2.DOM.EventTarget(this._img);
for(var _102 in this._listener){
this._listener[_102].forEach(function(elem,_104,arr){
this.registerListener(this._img,_102,elem);
},this);
}
}else{
if(this._image!=null){
this._img.src=this._image.src;
this._img.alt=this._text;
}else{
if(this._img!=null&&this._image==null){
this.domref.removeChild(this._img);
this._img=null;
for(var _102 in this._listener){
this._listener[_102].forEach(function(elem,_107,arr){
gara.EventManager.getInstance().removeListener({domNode:this._img,type:_102,listener:elem});
},this);
}
}
}
}
this._spanText.nodeValue=this._text;
this.domref.className=this._className;
if(this._toolTipText!=null){
this.domref.title=this._toolTipText;
}
}});
$class("ControlManager",{$implements:gara.jswt.FocusListener,_instance:$static(null),$constructor:function(){
this._activeControl=null;
this._controls=[];
base2.DOM.EventTarget(document);
gara.EventManager.getInstance().addListener(document,"keydown",this);
gara.EventManager.getInstance().addListener(document,"mousedown",this);
},getInstance:$static(function(){
if(this._instance==null){
this._instance=new gara.jswt.ControlManager();
}
return this._instance;
}),addControl:function(_109){
if(!this._controls.contains(_109)){
this._controls.push(_109);
}
},focusGained:function(_10a){
if(!$class.instanceOf(_10a,gara.jswt.Control)){
throw new TypeError("control is not a gara.jswt.Control");
}
if(this._activeControl!=null&&this._activeControl!=_10a){
this._activeControl.looseFocus();
}
this._activeControl=_10a;
},focusLost:function(_10b){
if(!$class.instanceOf(_10b,gara.jswt.Control)){
throw new TypeError("control is not a gara.jswt.Control");
}
if(this._activeControl==_10b){
this._activeControl=null;
}
},handleEvent:function(e){
if(e.type=="keydown"){
if(this._activeControl!=null&&this._activeControl.handleEvent){
this._activeControl.handleEvent(e);
}
}
if(e.type=="mousedown"){
if(this._activeControl!=null&&(e.target.control?e.target.control!=this._activeControl:true)){
this._activeControl.looseFocus();
this._activeControl=null;
}
}
},removeControl:function(_10d){
if(!$class.instanceOf(_10d,gara.jswt.Control)){
throw new TypeError("control is not a gara.jswt.Control");
}
if(this._controls.contains(_10d)){
if(this._activeControl==_10d){
this._activeControl=null;
}
this._controls.remove(_10d);
}
},toString:function(){
return "[gara.jswt.ControlManager]";
}});
var _10e=new gara.Package({name:"jswt",exports:"JSWT,ControlManager,Widget,Control,Composite,Item,List,ListItem,Tree,TreeItem,TabFolder,TabItem,FocusListener,SelectionListener",});
gara.jswt.namespace=_10e.namespace;
gara.jswt.toString=function(){
return "[gara.jswt]";
};
$package("");
})();


