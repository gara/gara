<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>gara.jsface.listviewer (dev)</title>
<link rel="stylesheet" href="../../res/yui-reset-fonts.css" type="text/css"/>
<link rel="stylesheet" href="../../res/gara.css" type="text/css"/>
<link rel="stylesheet" href="../../themes/sand/sand.css" type="text/css"/>
<script type="text/javascript" src="../../lib/class-debug.js"></script>
<script type="text/javascript" src="../../lib/base2-dom-fp.js"></script>
<script type="text/javascript" src="../garadev.js"></script>

<script type="text/javascript" src="../../src/core/_prepend.js"></script>
<script type="text/javascript" src="../../src/core/Package.class.js"></script>
<script type="text/javascript" src="../../src/core/EventManager.class.js"></script>
<script type="text/javascript" src="../../src/core/OutOfBoundsException.class.js"></script>
<script type="text/javascript" src="../../src/core/_append.js"></script>

<script type="text/javascript" src="../../src/jswt/_prepend.js"></script>
<script type="text/javascript" src="../../src/jswt/JSWT.class.js"></script>
<script type="text/javascript" src="../../src/jswt/FocusListener.interface.js"></script>
<script type="text/javascript" src="../../src/jswt/SelectionListener.interface.js"></script>
<script type="text/javascript" src="../../src/jswt/ItemNotExistsException.class.js"></script>
<script type="text/javascript" src="../../src/jswt/ControlManager.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Widget.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Item.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Control.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Composite.class.js"></script>
<script type="text/javascript" src="../../src/jswt/List.class.js"></script>
<script type="text/javascript" src="../../src/jswt/ListItem.class.js"></script>
<script type="text/javascript" src="../../src/jswt/_append.js"></script>

<script type="text/javascript" src="../../src/jsface/_prepend.js"></script>

<script type="text/javascript" src="../../src/jsface/IBaseLabelProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ILabelProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/LabelProvider.class.js"></script>

<script type="text/javascript" src="../../src/jsface/IContentProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/IStructuredContentProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ITreeContentProvider.interface.js"></script>

<script type="text/javascript" src="../../src/jsface/Viewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ContentViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/StructuredViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/AbstractListViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ListViewer.class.js"></script>

<script type="text/javascript" src="../../src/jsface/ViewerComparator.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ViewerSorter.class.js"></script>

<script type="text/javascript" src="../../src/jsface/ViewerFilter.class.js"></script>
<script type="text/javascript" src="../../src/jsface/PatternFilter.class.js"></script>

<script type="text/javascript" src="../../src/jsface/_append.js"></script>
<script type="text/javascript"><!--
$class("Controller", {
	$implements : [gara.jsface.ILabelProvider, gara.jsface.IStructuredContentProvider],

	$constructor : function() {
		this._model = null;
	},
	
	getImage : function(element) {
		return null;
	},

	getText : function(element) {
		return element;
	},
	
	getElements : function(inputElement) {
		return this._model;
	},
	
	inputChanged : function(viewer, oldInput, newInput) {
		this._model = newInput;
	},
	
	isLabelProperty : function(element, property) {}
});

var controller, view, filter;
var modelA = ["ameise", "zebra", "Chamaeleon", "beluga"];
var modelB = ["dÃ¼senflieger", "Ferd", "eimerfahrzeug"];
var currentModel = modelA;

function main() {
	try {
		filter = new gara.jsface.PatternFilter();
		controller = new Controller();
		view = new gara.jsface.ListViewer(document.getElementById("container"), gara.jswt.JSWT.MULTI | gara.jswt.JSWT.FULL_SELECTION);
		view.setContentProvider(controller);
		view.setLabelProvider(controller);
		view.setInput(modelA);
		view.addFilter(filter);

	} catch(e) {
		var message = "";
		for (p in e) {
			message += p + ": " + e[p] + "\n";
		}
		console.log(message);
	}
}

function addModelData() {
	var value = document.getElementById("model_add_value").value;
	var index = document.getElementById("model_add_index").value;
	
	currentModel.insertAt(index, value);
}

function toggleSorter() {
	if (view.getSorter() == null) {
		view.setSorter(new gara.jsface.ViewerSorter());
	} else {
		view.setSorter(null);
	}
}

function filterIt() {
	filter.setPattern(document.getElementById("pattern").value);
	refresh();
}

function refresh() {
	view.refresh();
}

function changeModel() {
	currentModel = currentModel == modelA ? modelB : modelA;
	view.setInput(currentModel);
}

function popModel() {
	alert("Popped: " + currentModel.pop());
}

--></script>
<style type="text/css">
label {display: block;}
</style>
</head>
<body style="padding: 10px;">
<h1 style="font-size: 24px; margin-bottom: 10px;">gara.jsface.ListViewer</h1>
<fieldset style="width: 300px; float: right;">
<legend>Widget Control</legend>
<label>Add Model Data</label>
<label>Value: <input type="text" size="5" id="model_add_value"/></label>
<label>Index: <input type="text" size="5" id="model_add_index"/></label>
<input type="button" value="add >>" onclick="addModelData()"/>
<input type="button" value="currentModel.length" onclick="alert(currentModel.length)"/>
<label>Remove Model Data</label>
Pop Last Element: <input type="button" value="pop" onclick="popModel()"/>
<label>Change Model</label>
Change model: <input type="button" value="change" onclick="changeModel()"/>
<label>Sorter</label>
Toggle Sorter: <input type="button" value="toggle" onclick="toggleSorter()" />
<label>Filter</label>
<input type="text" size="10" id="pattern"/><input type="button" value="Filter" onclick="filterIt()"/>
<label>Refresh</label>
Refresh model: <input type="button" value="refresh" onclick="refresh()"/>


</fieldset>
<div id="container" class="sand" style="width: 300px;">
</div>
<script type="text/javascript">main();</script>
</body>
</html>