<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>gara.jsface.tableviewer (dev)</title>
<link rel="stylesheet" href="../../res/yui-reset-fonts.css" type="text/css"/>
<link rel="stylesheet" href="../../res/gara.css" type="text/css"/>
<link rel="stylesheet" href="../../themes/sand/sand.css" type="text/css"/>
<script type="text/javascript" src="../../lib/class-debug.js"></script>
<script type="text/javascript" src="../../lib/base2-dom-fp.js"></script>
<script type="text/javascript" src="../garadev.js"></script>

<script type="text/javascript" src="../../src/core/_prepend.js"></script>
<script type="text/javascript" src="../../src/core/Package.class.js"></script>
<script type="text/javascript" src="../../src/core/Utils.class.js"></script>
<script type="text/javascript" src="../../src/core/EventManager.class.js"></script>
<script type="text/javascript" src="../../src/core/OutOfBoundsException.class.js"></script>
<script type="text/javascript" src="../../src/core/_append.js"></script>

<script type="text/javascript" src="../../src/jswt/_prepend.js"></script>
<script type="text/javascript" src="../../src/jswt/JSWT.class.js"></script>
<script type="text/javascript" src="../../src/jswt/JSWTException.class.js"></script>
<script type="text/javascript" src="../../src/jswt/FocusListener.interface.js"></script>
<script type="text/javascript" src="../../src/jswt/SelectionListener.interface.js"></script>
<script type="text/javascript" src="../../src/jswt/ItemNotExistsException.class.js"></script>
<script type="text/javascript" src="../../src/jswt/ControlManager.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Widget.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Item.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Control.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Composite.class.js"></script>
<script type="text/javascript" src="../../src/jswt/Table.class.js"></script>
<script type="text/javascript" src="../../src/jswt/TableItem.class.js"></script>
<script type="text/javascript" src="../../src/jswt/TableColumn.class.js"></script>
<script type="text/javascript" src="../../src/jswt/_append.js"></script>

<script type="text/javascript" src="../../src/jsface/_prepend.js"></script>

<script type="text/javascript" src="../../src/jsface/IBaseLabelProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ILabelProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ITableLabelProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/LabelProvider.class.js"></script>
<script type="text/javascript" src="../../src/jsface/BaseLabelProvider.class.js"></script>
<script type="text/javascript" src="../../src/jsface/CellLabelProvider.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ColumnLabelProvider.class.js"></script>
<script type="text/javascript" src="../../src/jsface/WrappedViewerLabelProvider.class.js"></script>
<script type="text/javascript" src="../../src/jsface/TableColumnViewerLabelProvider.class.js"></script>

<script type="text/javascript" src="../../src/jsface/IContentProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/IStructuredContentProvider.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ITreeContentProvider.interface.js"></script>

<script type="text/javascript" src="../../src/jsface/ISelectionChangedListener.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ICheckStateListener.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/ICheckable.interface.js"></script>
<script type="text/javascript" src="../../src/jsface/CheckStateChangedEvent.class.js"></script>
<script type="text/javascript" src="../../src/jsface/SelectionChangedEvent.class.js"></script>

<script type="text/javascript" src="../../src/jsface/Viewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/TableViewerRow.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ViewerCell.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ViewerColumn.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ViewerRow.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ContentViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/StructuredViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ColumnViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/AbstractTableViewer.class.js"></script>
<script type="text/javascript" src="../../src/jsface/TableViewer.class.js"></script>

<script type="text/javascript" src="../../src/jsface/ViewerComparator.class.js"></script>
<script type="text/javascript" src="../../src/jsface/ViewerSorter.class.js"></script>

<script type="text/javascript" src="../../src/jsface/ViewerFilter.class.js"></script>
<script type="text/javascript" src="../../src/jsface/PatternFilter.class.js"></script>

<script type="text/javascript" src="../../src/jsface/_append.js"></script>
<script type="text/javascript"><!--
$class("Controller", {
	$implements : [gara.jsface.ITableLabelProvider, gara.jsface.IContentProvider, gara.jsface.ISelectionChangedListener],

	$constructor : function() {
		this._model = null;
		this._selectedItem = null;
	},

	getColumnImage : function(element, columnIndex) {
		return null;
	},

	getColumnText : function(element, columnIndex) {
		return element[columnIndex];
	},

	hasChildren : function(element) {
		return element.hasOwnProperty("childs") && element.childs.length;
	},

	getElements : function(inputElement) {
		return this._model;
	},

	inputChanged : function(viewer, oldInput, newInput) {
		this._model = newInput;
	},

	isLabelProperty : function(element, property) {},
	
	selectionChanged : function(event) {
		//console.log("Selection changed: " + event.getSelection()[0]);
	}
});

var model, view, controller, filter;

model = [
	["row1.1", "row1.2", "row1.3"],
	["row2.1", "row2.2", "row2.3"],
	["row3.1", "row3.2", "row3.3"],
	["row4.1", "row4.2", "row4.3"],
	["row5.1", "row5.2", "row5.3"]
];

function main() {
	try {
		var table;
		filter = new gara.jsface.PatternFilter();
		controller = new Controller();
		view = new gara.jsface.TableViewer(document.getElementById("container"), gara.jswt.JSWT.SINGLE | gara.jswt.JSWT.FULL_SELECTION);
		view.addFilter(filter);
		table = view.getTable();
		table.setHeaderVisible(true);
		table.setLinesVisible(true);
		var c1 = new gara.jswt.TableColumn(table);
		c1.setText("bla");
		
		var c2 = new gara.jswt.TableColumn(table);
		c2.setText("bla2");
		
		var c3 = new gara.jswt.TableColumn(table);
		c3.setText("bla3");
		view.setContentProvider(controller);
		view.setLabelProvider(controller);
		view.addSelectionChangedListener(controller);
		view.setInput(model);
	} catch(e) {
		var message = "";
		for (p in e) {
			message += p + ": " + e[p] + "\n";
		}
		console.log(message);
	}
}
function filterIt(that) {
	filter.setPattern(that.value);
	view.refresh();
}
--></script>
</head>
<body style="padding: 10px;">
<h1 style="font-size: 24px; margin-bottom: 10px;">gara.jsface.TableViewer</h1>
<fieldset style="width: 300px; float: right;">
<legend>Widget Control</legend>
<label>Filter</label>
<input type="text" id="pattern" onkeyup="filterIt(this);"/>
</fieldset>
<div id="container" class="sand" style="width: 300px;">
</div>
<script type="text/javascript">main();</script>
</body>
</html>