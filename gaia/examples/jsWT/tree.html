<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>jsWT: Tree</title>
<link rel="stylesheet" type="text/css" href="../../gaia/gaia.css"/>
<script type="text/javascript" src="../../gaia/gaia.combined.js"></script>
<script type="text/javascript"><!--
function main() {
	l = new TreeListener();
	try {
	t = new Tree(null);
	} catch(e) {
		alert(e.message);
	}
	/*try {
	t = new Tree(document.getElementsByTagName("body")[0]);
	} catch(e) {
		var sText = null;
		for (var p in e) {
			sText += p + " = " + e[p] + "\n";
		}
		alert(sText);
	}*/
	t.addSelectionListener(l);
	t.addClassName("myTree");
	
	var i1 = new TreeItem(t);
	i1.setText("item1");
	var i2 = new TreeItem(t);
	i2.setText("item2");
	
	var i3 = new TreeItem(i2);
	i3.setText("item3");
	
	var i4 = new TreeItem(t);
	i4.setText("item4");
	
	var i5 = new TreeItem(i3);
	i5.setText("item5");
	
	var i6 = new TreeItem(i2);
	i6.setText("item6");
	i6.addListener("dblclick", {
		handleEvent: function(e) {
			alert("dblclick item6");
		}		
	});

	var i7 = new TreeItem(i6)
	i7.setText("item7");
	
	var i8 = new TreeItem(i1);
	i8.setText("item8");
	
	var i9img = new Image();
	i9img.src = "../../gaia/res/images/error.png";
	var i9 = new TreeItem(i4);
	i9.setText("item9");
	
	i2.setImage(i9img);

	t.update();

}

function addEvent() {
	
}

function selectAll() {
	t.selectAll();
}

function deselectAll() {
	t.deselectAll();
}

function showLines() {
	t.setLinesVisible(true);
	t.update();
}

function hideLines() {
	t.setLinesVisible(false);
	t.update();
}

function addItem() {
	var parentItem = document.getElementById("parentList").value;
	
	if (parentItem == "tree") {
		parentItem = t;
	} else {
		parentItem = l.getItem(parentItem);
	}

	var sName = document.getElementById("itemName").value == "" ? "N/A" : document.getElementById("itemName").value;
	var i = new TreeItem(parentItem);
	i.setText(sName);

	gaia.getLog().addMessage("item added: " + i.getText());
	t.update();
}

function TreeListener() {
	this.items = new Array();

	this.widgetSelected = function(tree) {
		this.items = null;
		this.items = tree.getSelection();

		var list = document.getElementById("parentList");

		// clear list
		for (var i = 1; i < list.options.length; ++i) {
			list.options[i] = null;
		}

		// refill list
		for (var i = 0; i < this.items.length; ++i) {
			list.options[i + 1] = new Option(this.items[i].getText());
			list.options[i + 1].value = i;
		}
	}

	this.getItem = function(iOffset) {
		return this.items[iOffset];
	}
}
--></script>
<link rel="stylesheet" href="../examples.css" type="text/css"/>
<style type="text/css">
.myTree {
	width: 350px;
	border: 1px solid #444;
}
</style>
</head>
<body>
<h1>jsWT.Tree</h1>
<fieldset>
<legend>Tree Control</legend>
	<a href="javascript:selectAll()">select All</a>
	<a href="javascript:deselectAll()">deselect All</a>
	<a href="javascript:showLines()">show Lines</a>
	<a href="javascript:hideLines()">hide Lines</a>
	<fieldset>
		<legend>Add Item</legend>
		Parent: <select id="parentList"><option value="tree">*root*</option></select><br/>
		Name: <input type="text" id="itemName"/><br/>
		<input type="button" value="add" onclick="addItem()"/>
	</fieldset>
</fieldset>
<h2>Tree Widget</h2>
<script type="text/javascript">
main();
</script>
</body>
</html>